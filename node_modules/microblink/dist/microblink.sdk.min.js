var Microblink=function(t){"use strict";var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,r)};function r(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}function n(t,e,r,n){return new(r||(r=Promise))(function(i,o){function s(t){try{c(n.next(t))}catch(t){o(t)}}function a(t){try{c(n.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r(function(t){t(e)})).then(s,a)}c((n=n.apply(t,e||[])).next())})}function i(t,e){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function o(t){return new Promise(function(e,r){var n=new FileReader,i="function"==typeof n.readAsBinaryString;n.onloadend=function(){var t=n.result||"";if(i)return e(t);e(function(t){var e="",r=new Uint8Array(t),n=r.byteLength,i=-1;for(;++i<n;)e+=String.fromCharCode(r[i]);return e}(t))},n.onerror=r,i?n.readAsBinaryString(t):n.readAsArrayBuffer(t)})}function s(t){return o(t).then(btoa)}var a="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function c(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function u(t,e){return t(e={exports:{}},e.exports),e.exports}var h=u(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.isFunction=function(t){return"function"==typeof t}});c(h);h.isFunction;var p=u(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var r=!1;e.config={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){var e=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+e.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=t},get useDeprecatedSynchronousErrorHandling(){return r}}});c(p);p.config;var f=u(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.hostReportError=function(t){setTimeout(function(){throw t},0)}});c(f);f.hostReportError;var l=u(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.empty={closed:!0,next:function(t){},error:function(t){if(p.config.useDeprecatedSynchronousErrorHandling)throw t;f.hostReportError(t)},complete:function(){}}});c(l);l.empty;var d=u(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.isArray=Array.isArray||function(t){return t&&"number"==typeof t.length}});c(d);d.isArray;var y=u(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.isObject=function(t){return null!==t&&"object"==typeof t}});c(y);y.isObject;var b=u(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t){return Error.call(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map(function(t,e){return e+1+") "+t.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t}();e.UnsubscriptionError=r});c(b);b.UnsubscriptionError;var g=u(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}var e;return t.prototype.unsubscribe=function(){var e;if(!this.closed){var r=this._parentOrParents,i=this._unsubscribe,o=this._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,r instanceof t)r.remove(this);else if(null!==r)for(var s=0;s<r.length;++s){r[s].remove(this)}if(h.isFunction(i))try{i.call(this)}catch(t){e=t instanceof b.UnsubscriptionError?n(t.errors):[t]}if(d.isArray(o)){s=-1;for(var a=o.length;++s<a;){var c=o[s];if(y.isObject(c))try{c.unsubscribe()}catch(t){e=e||[],t instanceof b.UnsubscriptionError?e=e.concat(n(t.errors)):e.push(t)}}}if(e)throw new b.UnsubscriptionError(e)}},t.prototype.add=function(e){var r=e;if(!e)return t.EMPTY;switch(typeof e){case"function":r=new t(e);case"object":if(r===this||r.closed||"function"!=typeof r.unsubscribe)return r;if(this.closed)return r.unsubscribe(),r;if(!(r instanceof t)){var n=r;(r=new t)._subscriptions=[n]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}var i=r._parentOrParents;if(null===i)r._parentOrParents=this;else if(i instanceof t){if(i===this)return r;r._parentOrParents=[i,this]}else{if(-1!==i.indexOf(this))return r;i.push(this)}var o=this._subscriptions;return null===o?this._subscriptions=[r]:o.push(r),r},t.prototype.remove=function(t){var e=this._subscriptions;if(e){var r=e.indexOf(t);-1!==r&&e.splice(r,1)}},t.EMPTY=((e=new t).closed=!0,e),t}();function n(t){return t.reduce(function(t,e){return t.concat(e instanceof b.UnsubscriptionError?e.errors:e)},[])}e.Subscription=r});c(g);g.Subscription;var v=u(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.rxSubscriber="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random(),e.$$rxSubscriber=e.rxSubscriber});c(v);v.rxSubscriber,v.$$rxSubscriber;var m=u(function(t,e){var r,n=a&&a.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(r,n,i){var s=t.call(this)||this;switch(s.syncErrorValue=null,s.syncErrorThrown=!1,s.syncErrorThrowable=!1,s.isStopped=!1,arguments.length){case 0:s.destination=l.empty;break;case 1:if(!r){s.destination=l.empty;break}if("object"==typeof r){r instanceof e?(s.syncErrorThrowable=r.syncErrorThrowable,s.destination=r,r.add(s)):(s.syncErrorThrowable=!0,s.destination=new o(s,r));break}default:s.syncErrorThrowable=!0,s.destination=new o(s,r,n,i)}return s}return n(e,t),e.prototype[v.rxSubscriber]=function(){return this},e.create=function(t,r,n){var i=new e(t,r,n);return i.syncErrorThrowable=!1,i},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var t=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this},e}(g.Subscription);e.Subscriber=i;var o=function(t){function e(e,r,n,i){var o,s=t.call(this)||this;s._parentSubscriber=e;var a=s;return h.isFunction(r)?o=r:r&&(o=r.next,n=r.error,i=r.complete,r!==l.empty&&(a=Object.create(r),h.isFunction(a.unsubscribe)&&s.add(a.unsubscribe.bind(a)),a.unsubscribe=s.unsubscribe.bind(s))),s._context=a,s._next=o,s._error=n,s._complete=i,s}return n(e,t),e.prototype.next=function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;p.config.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},e.prototype.error=function(t){if(!this.isStopped){var e=this._parentSubscriber,r=p.config.useDeprecatedSynchronousErrorHandling;if(this._error)r&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)r?(e.syncErrorValue=t,e.syncErrorThrown=!0):f.hostReportError(t),this.unsubscribe();else{if(this.unsubscribe(),r)throw t;f.hostReportError(t)}}},e.prototype.complete=function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var r=function(){return t._complete.call(t._context)};p.config.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,r),this.unsubscribe()):(this.__tryOrUnsub(r),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(t,e){try{t.call(this._context,e)}catch(t){if(this.unsubscribe(),p.config.useDeprecatedSynchronousErrorHandling)throw t;f.hostReportError(t)}},e.prototype.__tryOrSetError=function(t,e,r){if(!p.config.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,r)}catch(e){return p.config.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=e,t.syncErrorThrown=!0,!0):(f.hostReportError(e),!0)}return!1},e.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},e}(i);e.SafeSubscriber=o});c(m);m.Subscriber,m.SafeSubscriber;var _=u(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.canReportError=function(t){for(;t;){var e=t,r=e.closed,n=e.destination,i=e.isStopped;if(r||i)return!1;t=n&&n instanceof m.Subscriber?n:null}return!0}});c(_);_.canReportError;var S=u(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.toSubscriber=function(t,e,r){if(t){if(t instanceof m.Subscriber)return t;if(t[v.rxSubscriber])return t[v.rxSubscriber]()}return t||e||r?new m.Subscriber(t,e,r):new m.Subscriber(l.empty)}});c(S);S.toSubscriber;var w=u(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.observable="function"==typeof Symbol&&Symbol.observable||"@@observable"});c(w);w.observable;var E=u(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.noop=function(){}});c(E);E.noop;var I=u(function(t,e){function r(t){return t?1===t.length?t[0]:function(e){return t.reduce(function(t,e){return e(t)},e)}:E.noop}Object.defineProperty(e,"__esModule",{value:!0}),e.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return r(t)},e.pipeFromArray=r});c(I);I.pipe,I.pipeFromArray;var z=u(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t){this._isScalar=!1,t&&(this._subscribe=t)}return t.prototype.lift=function(e){var r=new t;return r.source=this,r.operator=e,r},t.prototype.subscribe=function(t,e,r){var n=this.operator,i=S.toSubscriber(t,e,r);if(n?i.add(n.call(i,this.source)):i.add(this.source||p.config.useDeprecatedSynchronousErrorHandling&&!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),p.config.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){p.config.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),_.canReportError(t)?t.error(e):console.warn(e)}},t.prototype.forEach=function(t,e){var r=this;return new(e=n(e))(function(e,n){var i;i=r.subscribe(function(e){try{t(e)}catch(t){n(t),i&&i.unsubscribe()}},n,e)})},t.prototype._subscribe=function(t){var e=this.source;return e&&e.subscribe(t)},t.prototype[w.observable]=function(){return this},t.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 0===t.length?this:I.pipeFromArray(t)(this)},t.prototype.toPromise=function(t){var e=this;return new(t=n(t))(function(t,r){var n;e.subscribe(function(t){return n=t},function(t){return r(t)},function(){return t(n)})})},t.create=function(e){return new t(e)},t}();function n(t){if(t||(t=p.config.Promise||Promise),!t)throw new Error("no Promise impl found");return t}e.Observable=r});c(z);var x,A,O,F=z.Observable;!function(t){t.Ok="OK",t.ResultIsNotValidJSON="RESULT_IS_NOT_VALID_JSON",t.TimedOut="CONNECTION_TIMED_OUT"}(x||(x={})),function(t){t.Face="exportFaceImage",t.FullDocument="exportFullDocumentImage",t.Signature="exportSignatureImage"}(A||(A={})),function(t){t.Step01_RemoteCameraIsRequested="STEP_1_REMOTE_CAMERA_IS_REQUESTED",t.Step02_ExchangeLinkIsGenerated="STEP_2_EXCHANGE_LINK_IS_GENERATED",t.Step03_RemoteCameraIsPending="STEP_3_REMOTE_CAMERA_IS_PENDING",t.Step04_RemoteCameraIsOpen="STEP_4_REMOTE_CAMERA_IS_OPEN",t.Step05_ImageIsUploading="STEP_5_IMAGE_IS_UPLOADING",t.Step06_ImageIsProcessing="STEP_6_IMAGE_IS_PROCESSING",t.Step07_ResultIsAvailable="STEP_7_RESULT_IS_AVAILABLE",t.ErrorHappened="ERROR_HAPPENED"}(O||(O={}));var k="https://api.microblink.com",B=function(){function t(){this.authorizationHeader="",this.exportImages=!1,this.exportFullDocumentImage=!1,this.exportSignatureImage=!1,this.exportFaceImage=!1,this.detectGlare=!1,this.anonymizeCardNumber=!1,this.anonymizeIban=!1,this.anonymizeCvv=!1,this.anonymizeOwner=!1,this.allowBlurFilter=!1,this.anonymizeNetherlandsMrz=!1,this.activeRequests=[],this.userId="",this.isDataPersistingEnabled=!0,this.endpoint=k}return t.prototype.TerminateAll=function(){this.activeRequests.forEach(function(t){t.abort()}),this.activeRequests=[]},t.prototype.SetAuthorization=function(t){this.authorizationHeader=t},t.prototype.SetExportImages=function(t){this.exportImages=t},t.prototype.SetExportFullDocumentImage=function(t){this.exportFullDocumentImage=t},t.prototype.SetExportSignatureImage=function(t){this.exportSignatureImage=t},t.prototype.SetExportFaceImage=function(t){this.exportFaceImage=t},t.prototype.SetDetectGlare=function(t){this.detectGlare=t},t.prototype.SetAllowBlurFilter=function(t){this.allowBlurFilter=t},t.prototype.SetEndpoint=function(t){this.endpoint=t},t.prototype.SetAnonymizeCardNumber=function(t){this.anonymizeCardNumber=t},t.prototype.SetAnonymizeIban=function(t){this.anonymizeIban=t},t.prototype.SetAnonymizeCvv=function(t){this.anonymizeCvv=t},t.prototype.SetAnonymizeOwner=function(t){this.anonymizeOwner=t},t.prototype.SetUserId=function(t){this.userId=t},t.prototype.SetIsDataPersistingEnabled=function(t){this.isDataPersistingEnabled=t},t.prototype.SetAnonymizeNetherlandsMrz=function(t){this.anonymizeNetherlandsMrz=t},t.prototype.Recognize=function(t,e,r){var n=this;return new F(function(i){var o={imageBase64:e};"string"==typeof t?o.recognizer=t:o.recognizers=t,n.exportImages&&(o.exportImages=n.exportImages),n.exportFullDocumentImage&&(o.exportFullDocumentImage=!0),n.exportSignatureImage&&(o.exportSignatureImage=!0),n.exportFaceImage&&(o.exportFaceImage=!0),n.detectGlare&&(o.detectGlare=!0),n.allowBlurFilter&&(o.allowBlurFilter=!0),n.anonymizeCardNumber&&(o.anonymizeCardNumber=!0),n.anonymizeIban&&(o.anonymizeIban=!0),n.anonymizeCvv&&(o.anonymizeCvv=!0),n.anonymizeOwner&&(o.anonymizeOwner=!0),n.userId&&(o.userId=n.userId),!1===n.isDataPersistingEnabled&&(o.disableDataPersisting=!0),n.anonymizeNetherlandsMrz&&(o.anonymizeNetherlandsMrz=!0);var s=JSON.stringify(o),a=new XMLHttpRequest;a.withCredentials=!0,r&&(a.timeout=4e4),a.open("POST",n.endpoint+"/recognize/execute"),a.setRequestHeader("Content-Type","application/json"),n.isAuthorizationHeaderValid&&a.setRequestHeader("Authorization",n.authorizationHeader),a.addEventListener("readystatechange",function(){if(4===this.readyState){var t=null;try{t=JSON.parse(this.responseText),200===this.status?(i.next(t),i.complete()):i.error(t)}catch(e){t=r&&0===this.status?{code:x.TimedOut,message:"Connection timed out. Please try again."}:{error:"Result is not valid JSON",code:x.ResultIsNotValidJSON,responseText:this.responseText},i.error(t)}}}),a.onerror=function(t){i.error(t)},r&&(a.upload.addEventListener("progress",r,!1),a.upload.addEventListener("load",r,!1)),a.send(s),n.activeRequests.push(a)})},Object.defineProperty(t.prototype,"isAuthorizationHeaderValid",{get:function(){return!!(this.authorizationHeader.startsWith("Bearer ")||this.authorizationHeader.startsWith("bearer ")||this.authorizationHeader.startsWith("Basic ")||this.authorizationHeader.startsWith("basic "))},enumerable:!0,configurable:!0}),t}(),P=function(){function t(){}return t.getFrameQuality=function(t){return this.calculateFrameQuality(t.data,t.width,t.height)},t.calculateFrameQuality=function(t,e,r){for(var n=0,i=0,o=0;o<28;o++)for(var s=parseInt((e/29).toString(),10),a=parseInt((s*o+s/2).toString(),10),c=1;c<r-1;c++){var u=this.getIntensity(t,c,a,e),h=this.getIntensity(t,c-1,a,e);i+=1,n+=(p=u-this.getIntensity(t,c+1,a,e)-(h-u))*p}for(o=0;o<20;o++)for(s=parseInt((r/21).toString(),10),c=parseInt((s*o+s/2).toString(),10),a=1;a<e-1;a++){var p;u=this.getIntensity(t,c,a,e),h=this.getIntensity(t,c,a-1,e);i+=1,n+=(p=u-this.getIntensity(t,c,a+1,e)-(h-u))*p}var f=n/i,l=parseFloat((e*r).toString())/307200;return l>1?(l>10&&(l=10),f/=l):f*=l,f},t.getIntensity=function(t,e,r,n){var i=4*(e*n+r);return.2126*t[i]+.7152*t[i+1]+.0722*t[i+2]},t}();try{firebase.firestore().settings({})}catch(t){}for(var M=function(){function t(){}return t.createScanExchanger=function(t){return void 0===t&&(t={}),n(this,void 0,void 0,function(){var e;return i(this,function(r){switch(r.label){case 0:return e=firebase.firestore().collection("scans").doc(),t.status=O.Step01_RemoteCameraIsRequested,t.scanId=e.id,[4,e.set(t)];case 1:return r.sent(),[2,e]}})})},t.generateQRCode=function(t){return n(this,void 0,void 0,function(){var e;return i(this,function(r){switch(r.label){case 0:e=null,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,QRCode.toDataURL(t,{errorCorrectionLevel:"H",type:"image/png",width:1024,margin:4})];case 2:return e=r.sent(),[3,4];case 3:return r.sent(),[3,4];case 4:return[2,e]}})})},t}(),R=function(){function t(){}return t.stringify=function(t){for(var e=[],r=0;r<t.sigBytes;r++){var n=t.words[r>>>2]>>>24-r%4*8&255;e.push((n>>>4).toString(16)),e.push((15&n).toString(16))}return e.join("")},t.parse=function(t){for(var e=t.length,r=[],n=0;n<e;n+=2)r[n>>>3]|=parseInt(t.substr(n,2),16)<<24-n%8*4;return new D(r,e/2)},t}(),D=function(){function t(t,e){this.words=t||[],this.sigBytes=void 0!==e?e:4*this.words.length}return t.random=function(e){for(var r=[],n=function(t){var e=987654321,r=4294967295;return function(){var n=((e=36969*(65535&e)+(e>>16)&r)<<16)+(t=18e3*(65535&t)+(t>>16)&r)&r;return n/=4294967296,(n+=.5)*(Math.random()>.5?1:-1)}},i=0,o=void 0;i<e;i+=4){var s=n(4294967296*(o||Math.random()));o=987654071*s(),r.push(4294967296*s()|0)}return new t(r,e)},t.prototype.toString=function(t){return(t||R).stringify(this)},t.prototype.concat=function(t){if(this.clamp(),this.sigBytes%4)for(var e=0;e<t.sigBytes;e++){var r=t.words[e>>>2]>>>24-e%4*8&255;this.words[this.sigBytes+e>>>2]|=r<<24-(this.sigBytes+e)%4*8}else for(e=0;e<t.sigBytes;e+=4)this.words[this.sigBytes+e>>>2]=t.words[e>>>2];return this.sigBytes+=t.sigBytes,this},t.prototype.clamp=function(){this.words[this.sigBytes>>>2]&=4294967295<<32-this.sigBytes%4*8,this.words.length=Math.ceil(this.sigBytes/4)},t.prototype.clone=function(){return new t(this.words.slice(0),this.sigBytes)},t}(),H=function(){function t(){}return t.stringify=function(t){for(var e=[],r=0;r<t.sigBytes;r++){var n=t.words[r>>>2]>>>24-r%4*8&255;e.push(String.fromCharCode(n))}return e.join("")},t.parse=function(t){for(var e=t.length,r=[],n=0;n<e;n++)r[n>>>2]|=(255&t.charCodeAt(n))<<24-n%4*8;return new D(r,e)},t}(),C=function(){function t(){}return t.stringify=function(t){try{return decodeURIComponent(escape(H.stringify(t)))}catch(t){throw new Error("Malformed UTF-8 data")}},t.parse=function(t){return H.parse(unescape(encodeURIComponent(t)))},t}(),T=function(){function t(t){this._minBufferSize=0,this.cfg=Object.assign({blockSize:1},t),this._data=new D,this._nDataBytes=0}return t.prototype.reset=function(){this._data=new D,this._nDataBytes=0},t.prototype._append=function(t){"string"==typeof t&&(t=C.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},t.prototype._process=function(t){if(!this.cfg.blockSize)throw new Error("missing blockSize in config");var e,r=4*this.cfg.blockSize,n=this._data.sigBytes/r,i=(n=t?Math.ceil(n):Math.max((0|n)-this._minBufferSize,0))*this.cfg.blockSize,o=Math.min(4*i,this._data.sigBytes);if(i){for(var s=0;s<i;s+=this.cfg.blockSize)this._doProcessBlock(this._data.words,s);e=this._data.words.splice(0,i),this._data.sigBytes-=o}return new D(e,o)},t.prototype.clone=function(){var t=this.constructor();for(var e in this)this.hasOwnProperty(e)&&(t[e]=this[e]);return t._data=this._data.clone(),t},t}(),G=function(t){function e(e){var r=t.call(this)||this;return r.ciphertext=e.ciphertext,r.key=e.key,r.iv=e.iv,r.salt=e.salt,r.algorithm=e.algorithm,r.mode=e.mode,r.padding=e.padding,r.blockSize=e.blockSize,r.formatter=e.formatter,r}return r(e,t),e.prototype.extend=function(t){return void 0!==t.ciphertext&&(this.ciphertext=t.ciphertext),void 0!==t.key&&(this.key=t.key),void 0!==t.iv&&(this.iv=t.iv),void 0!==t.salt&&(this.salt=t.salt),void 0!==t.algorithm&&(this.algorithm=t.algorithm),void 0!==t.mode&&(this.mode=t.mode),void 0!==t.padding&&(this.padding=t.padding),void 0!==t.blockSize&&(this.blockSize=t.blockSize),void 0!==t.formatter&&(this.formatter=t.formatter),this},e.prototype.toString=function(t){if(t)return t.stringify(this);if(this.formatter)return this.formatter.stringify(this);throw new Error("cipher needs a formatter to be able to convert the result into a string")},e}(function(){return function(){}}()),N=function(){function t(){}return t.stringify=function(t){t.clamp();for(var e=[],r=0;r<t.sigBytes;r+=3)for(var n=(t.words[r>>>2]>>>24-r%4*8&255)<<16|(t.words[r+1>>>2]>>>24-(r+1)%4*8&255)<<8|t.words[r+2>>>2]>>>24-(r+2)%4*8&255,i=0;i<4&&r+.75*i<t.sigBytes;i++)e.push(this._map.charAt(n>>>6*(3-i)&63));var o=this._map.charAt(64);if(o)for(;e.length%4;)e.push(o);return e.join("")},t.parse=function(t){var e=t.length;if(void 0===this._reverseMap){this._reverseMap=[];for(var r=0;r<this._map.length;r++)this._reverseMap[this._map.charCodeAt(r)]=r}var n=this._map.charAt(64);if(n){var i=t.indexOf(n);-1!==i&&(e=i)}return this.parseLoop(t,e,this._reverseMap)},t.parseLoop=function(t,e,r){for(var n=[],i=0,o=0;o<e;o++)if(o%4){var s=r[t.charCodeAt(o-1)]<<o%4*2,a=r[t.charCodeAt(o)]>>>6-o%4*2;n[i>>>2]|=(s|a)<<24-i%4*8,i++}return new D(n,i)},t._map="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",t._reverseMap=void 0,t}(),j=function(){function t(){}return t.stringify=function(t){if(!t.ciphertext)throw new Error("missing ciphertext in params");var e,r=t.ciphertext,n=t.salt;if(n){if("string"==typeof n)throw new Error("salt is expected to be a WordArray");e=new D([1398893684,1701076831]).concat(n).concat(r)}else e=r;return e.toString(N)},t.parse=function(t){var e,r=N.parse(t);return 1398893684===r.words[0]&&1701076831===r.words[1]&&(e=new D(r.words.slice(2,4)),r.words.splice(0,4),r.sigBytes-=16),new G({ciphertext:r,salt:e})},t}(),U=function(){function t(){}return t.encrypt=function(t,e,r,n){var i=Object.assign({},this.cfg,n),o=t.createEncryptor(r,i),s=o.finalize(e);return new G({ciphertext:s,key:r,iv:o.cfg.iv,algorithm:t,mode:o.cfg.mode,padding:o.cfg.padding,blockSize:o.cfg.blockSize,formatter:i.format})},t.decrypt=function(t,e,r,n){var i=Object.assign({},this.cfg,n);if(!i.format)throw new Error("could not determine format");if(!(e=this._parse(e,i.format)).ciphertext)throw new Error("could not determine ciphertext");return t.createDecryptor(r,i).finalize(e.ciphertext)},t._parse=function(t,e){return"string"==typeof t?e.parse(t):t},t.cfg={blockSize:4,iv:new D([]),format:j},t}(),L=function(t){function e(e){var r=t.call(this,Object.assign({blockSize:16},e))||this;return r.reset(),r}return r(e,t),e._createHelper=function(t){return function(e,r){return new t(r).finalize(e)}},e.prototype.update=function(t){return this._append(t),this._process(),this},e.prototype.finalize=function(t){return t&&this._append(t),this._doFinalize()},e}(T),q=[],Q=0;Q<64;Q++)q[Q]=4294967296*Math.abs(Math.sin(Q+1))|0;var V=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.FF=function(t,e,r,n,i,o,s){var a=t+(e&r|~e&n)+i+s;return(a<<o|a>>>32-o)+e},e.GG=function(t,e,r,n,i,o,s){var a=t+(e&n|r&~n)+i+s;return(a<<o|a>>>32-o)+e},e.HH=function(t,e,r,n,i,o,s){var a=t+(e^r^n)+i+s;return(a<<o|a>>>32-o)+e},e.II=function(t,e,r,n,i,o,s){var a=t+(r^(e|~n))+i+s;return(a<<o|a>>>32-o)+e},e.prototype.reset=function(){t.prototype.reset.call(this),this._hash=new D([1732584193,4023233417,2562383102,271733878])},e.prototype._doProcessBlock=function(t,r){for(var n=0;n<16;n++){var i=r+n,o=t[i];t[i]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8)}var s=this._hash.words,a=t[r+0],c=t[r+1],u=t[r+2],h=t[r+3],p=t[r+4],f=t[r+5],l=t[r+6],d=t[r+7],y=t[r+8],b=t[r+9],g=t[r+10],v=t[r+11],m=t[r+12],_=t[r+13],S=t[r+14],w=t[r+15],E=s[0],I=s[1],z=s[2],x=s[3];E=e.FF(E,I,z,x,a,7,q[0]),x=e.FF(x,E,I,z,c,12,q[1]),z=e.FF(z,x,E,I,u,17,q[2]),I=e.FF(I,z,x,E,h,22,q[3]),E=e.FF(E,I,z,x,p,7,q[4]),x=e.FF(x,E,I,z,f,12,q[5]),z=e.FF(z,x,E,I,l,17,q[6]),I=e.FF(I,z,x,E,d,22,q[7]),E=e.FF(E,I,z,x,y,7,q[8]),x=e.FF(x,E,I,z,b,12,q[9]),z=e.FF(z,x,E,I,g,17,q[10]),I=e.FF(I,z,x,E,v,22,q[11]),E=e.FF(E,I,z,x,m,7,q[12]),x=e.FF(x,E,I,z,_,12,q[13]),z=e.FF(z,x,E,I,S,17,q[14]),I=e.FF(I,z,x,E,w,22,q[15]),E=e.GG(E,I,z,x,c,5,q[16]),x=e.GG(x,E,I,z,l,9,q[17]),z=e.GG(z,x,E,I,v,14,q[18]),I=e.GG(I,z,x,E,a,20,q[19]),E=e.GG(E,I,z,x,f,5,q[20]),x=e.GG(x,E,I,z,g,9,q[21]),z=e.GG(z,x,E,I,w,14,q[22]),I=e.GG(I,z,x,E,p,20,q[23]),E=e.GG(E,I,z,x,b,5,q[24]),x=e.GG(x,E,I,z,S,9,q[25]),z=e.GG(z,x,E,I,h,14,q[26]),I=e.GG(I,z,x,E,y,20,q[27]),E=e.GG(E,I,z,x,_,5,q[28]),x=e.GG(x,E,I,z,u,9,q[29]),z=e.GG(z,x,E,I,d,14,q[30]),I=e.GG(I,z,x,E,m,20,q[31]),E=e.HH(E,I,z,x,f,4,q[32]),x=e.HH(x,E,I,z,y,11,q[33]),z=e.HH(z,x,E,I,v,16,q[34]),I=e.HH(I,z,x,E,S,23,q[35]),E=e.HH(E,I,z,x,c,4,q[36]),x=e.HH(x,E,I,z,p,11,q[37]),z=e.HH(z,x,E,I,d,16,q[38]),I=e.HH(I,z,x,E,g,23,q[39]),E=e.HH(E,I,z,x,_,4,q[40]),x=e.HH(x,E,I,z,a,11,q[41]),z=e.HH(z,x,E,I,h,16,q[42]),I=e.HH(I,z,x,E,l,23,q[43]),E=e.HH(E,I,z,x,b,4,q[44]),x=e.HH(x,E,I,z,m,11,q[45]),z=e.HH(z,x,E,I,w,16,q[46]),I=e.HH(I,z,x,E,u,23,q[47]),E=e.II(E,I,z,x,a,6,q[48]),x=e.II(x,E,I,z,d,10,q[49]),z=e.II(z,x,E,I,S,15,q[50]),I=e.II(I,z,x,E,f,21,q[51]),E=e.II(E,I,z,x,m,6,q[52]),x=e.II(x,E,I,z,h,10,q[53]),z=e.II(z,x,E,I,g,15,q[54]),I=e.II(I,z,x,E,c,21,q[55]),E=e.II(E,I,z,x,y,6,q[56]),x=e.II(x,E,I,z,w,10,q[57]),z=e.II(z,x,E,I,l,15,q[58]),I=e.II(I,z,x,E,_,21,q[59]),E=e.II(E,I,z,x,p,6,q[60]),x=e.II(x,E,I,z,v,10,q[61]),z=e.II(z,x,E,I,u,15,q[62]),I=e.II(I,z,x,E,b,21,q[63]),s[0]=s[0]+E|0,s[1]=s[1]+I|0,s[2]=s[2]+z|0,s[3]=s[3]+x|0},e.prototype._doFinalize=function(){var t=this._data,e=t.words,r=8*this._nDataBytes,n=8*t.sigBytes;e[n>>>5]|=128<<24-n%32;var i=Math.floor(r/4294967296),o=r;e[15+(n+64>>>9<<4)]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),e[14+(n+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),t.sigBytes=4*(e.length+1),this._process();for(var s=this._hash,a=s.words,c=0;c<4;c++){var u=a[c];a[c]=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8)}return s},e}(L),J=function(){function t(t){this.cfg=Object.assign({keySize:4,hasher:V,iterations:1},t)}return t.prototype.compute=function(t,e){for(var r,n=new this.cfg.hasher,i=new D;i.words.length<this.cfg.keySize;){r&&n.update(r),r=n.update(t).finalize(e),n.reset();for(var o=1;o<this.cfg.iterations;o++)r=n.finalize(r),n.reset();i.concat(r)}return i.sigBytes=4*this.cfg.keySize,i},t}(),X=function(){function t(){}return t.execute=function(t,e,r,n){n||(n=D.random(8));var i=new J({keySize:e+r}).compute(t,n),o=new D(i.words.slice(e),4*r);return i.sigBytes=4*e,new G({key:i,iv:o,salt:n})},t}(),K=function(){function t(){}return t.encrypt=function(t,e,r,n){var i=Object.assign({},this.cfg,n);if(void 0===i.kdf)throw new Error("missing kdf in config");var o=i.kdf.execute(r,t.keySize,t.ivSize);return void 0!==o.iv&&(i.iv=o.iv),U.encrypt.call(this,t,e,o.key,i).extend(o)},t.decrypt=function(t,e,r,n){var i=Object.assign({},this.cfg,n);if(void 0===i.format)throw new Error("missing format in config");if(e=this._parse(e,i.format),void 0===i.kdf)throw new Error("the key derivation function must be set");var o=i.kdf.execute(r,t.keySize,t.ivSize,e.salt);return void 0!==o.iv&&(i.iv=o.iv),U.decrypt.call(this,t,e,o.key,i)},t._parse=function(t,e){return"string"==typeof t?e.parse(t):t},t.cfg={blockSize:4,iv:new D([]),format:j,kdf:X},t}(),W=function(t){function e(e,r,n){var i=t.call(this,Object.assign({blockSize:1},n))||this;return i._xformMode=e,i._key=r,i.reset(),i}return r(e,t),e.createEncryptor=function(t,e){return new this(this._ENC_XFORM_MODE,t,e)},e.createDecryptor=function(t,e){return new this(this._DEC_XFORM_MODE,t,e)},e._createHelper=function(t){return{encrypt:function(e,r,n){return"string"==typeof r?K.encrypt(t,e,r,n):U.encrypt(t,e,r,n)},decrypt:function(e,r,n){return"string"==typeof r?K.decrypt(t,e,r,n):U.decrypt(t,e,r,n)}}},e.prototype.process=function(t){return this._append(t),this._process()},e.prototype.finalize=function(t){return t&&this._append(t),this._doFinalize()},e._ENC_XFORM_MODE=1,e._DEC_XFORM_MODE=2,e.keySize=4,e.ivSize=4,e}(T),$=function(){function t(t,e){this.init(t,e)}return t.prototype.init=function(t,e){this._cipher=t,this._iv=e},t}(),Y=function(){function t(){}return t.createEncryptor=function(t,e){return new(0,this.Encryptor)(t,e)},t.createDecryptor=function(t,e){return new(0,this.Decryptor)(t,e)},t.Encryptor=$,t.Decryptor=$,t}(),Z=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.processBlock=function(t,e){if(void 0===this._cipher.cfg.blockSize)throw new Error("missing blockSize in cipher config");this.xorBlock(t,e,this._cipher.cfg.blockSize),this._cipher.encryptBlock(t,e),this._prevBlock=t.slice(e,e+this._cipher.cfg.blockSize)},e.prototype.xorBlock=function(t,e,r){var n;if(this._iv?(n=this._iv,this._iv=void 0):n=this._prevBlock,void 0!==n)for(var i=0;i<r;i++)t[e+i]^=n[i]},e}($),tt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.processBlock=function(t,e){if(void 0===this._cipher.cfg.blockSize)throw new Error("missing blockSize in cipher config");var r=t.slice(e,e+this._cipher.cfg.blockSize);this._cipher.decryptBlock(t,e),this.xorBlock(t,e,this._cipher.cfg.blockSize),this._prevBlock=r},e.prototype.xorBlock=function(t,e,r){var n;if(this._iv?(n=this._iv,this._iv=void 0):n=this._prevBlock,void 0!==n)for(var i=0;i<r;i++)t[e+i]^=n[i]},e}($),et=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.Encryptor=Z,e.Decryptor=tt,e}(Y),rt=function(){function t(){}return t.pad=function(t,e){for(var r=4*e,n=r-t.sigBytes%r,i=n<<24|n<<16|n<<8|n,o=[],s=0;s<n;s+=4)o.push(i);var a=new D(o,n);t.concat(a)},t.unpad=function(t){var e=255&t.words[t.sigBytes-1>>>2];t.sigBytes-=e},t}(),nt=function(t){function e(e,r,n){return t.call(this,e,r,Object.assign({blockSize:4,mode:et,padding:rt},n))||this}return r(e,t),e.prototype.reset=function(){if(t.prototype.reset.call(this),void 0===this.cfg.mode)throw new Error("missing mode in config");var e;this._xformMode===this.constructor._ENC_XFORM_MODE?e=this.cfg.mode.createEncryptor:(e=this.cfg.mode.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator===e?this._mode.init(this,this.cfg.iv&&this.cfg.iv.words):(this._mode=e.call(this.cfg.mode,this,this.cfg.iv&&this.cfg.iv.words),this._mode.__creator=e)},e.prototype._doProcessBlock=function(t,e){this._mode.processBlock(t,e)},e.prototype._doFinalize=function(){if(void 0===this.cfg.padding)throw new Error("missing padding in config");var t;if(this._xformMode===this.constructor._ENC_XFORM_MODE){if(void 0===this.cfg.blockSize)throw new Error("missing blockSize in config");this.cfg.padding.pad(this._data,this.cfg.blockSize),t=this._process(!0)}else t=this._process(!0),this.cfg.padding.unpad(t);return t},e}(W),it=[],ot=[],st=[],at=[],ct=[],ut=[],ht=[],pt=[],ft=[],lt=[];!function(){for(var t=[],e=0;e<256;e++)t[e]=e<128?e<<1:e<<1^283;var r=0,n=0;for(e=0;e<256;e++){var i=n^n<<1^n<<2^n<<3^n<<4;i=i>>>8^255&i^99,it[r]=i,ot[i]=r;var o=t[r],s=t[o],a=t[s],c=257*t[i]^16843008*i;st[r]=c<<24|c>>>8,at[r]=c<<16|c>>>16,ct[r]=c<<8|c>>>24,ut[r]=c,c=16843009*a^65537*s^257*o^16843008*r,ht[i]=c<<24|c>>>8,pt[i]=c<<16|c>>>16,ft[i]=c<<8|c>>>24,lt[i]=c,r?(r=o^t[t[t[a^o]]],n^=t[t[n]]):r=n=1}}();var dt=[0,1,2,4,8,16,32,64,128,27,54],yt=function(t){function e(e,r,n){return t.call(this,e,r,n)||this}return r(e,t),e.prototype.reset=function(){if(t.prototype.reset.call(this),!this._nRounds||this._keyPriorReset!==this._key){for(var e=this._keyPriorReset=this._key,r=e.words,n=e.sigBytes/4,i=4*((this._nRounds=n+6)+1),o=this._keySchedule=[],s=0;s<i;s++)if(s<n)o[s]=r[s];else{var a=o[s-1];s%n?n>6&&s%n==4&&(a=it[a>>>24]<<24|it[a>>>16&255]<<16|it[a>>>8&255]<<8|it[255&a]):(a=it[(a=a<<8|a>>>24)>>>24]<<24|it[a>>>16&255]<<16|it[a>>>8&255]<<8|it[255&a],a^=dt[s/n|0]<<24),o[s]=o[s-n]^a}for(var c=this._invKeySchedule=[],u=0;u<i;u++){s=i-u,a=void 0;a=u%4?o[s]:o[s-4],c[u]=u<4||s<=4?a:ht[it[a>>>24]]^pt[it[a>>>16&255]]^ft[it[a>>>8&255]]^lt[it[255&a]]}}},e.prototype.encryptBlock=function(t,e){this._doCryptBlock(t,e,this._keySchedule,st,at,ct,ut,it)},e.prototype.decryptBlock=function(t,e){var r=t[e+1];t[e+1]=t[e+3],t[e+3]=r,this._doCryptBlock(t,e,this._invKeySchedule,ht,pt,ft,lt,ot),r=t[e+1],t[e+1]=t[e+3],t[e+3]=r},e.prototype._doCryptBlock=function(t,e,r,n,i,o,s,a){for(var c=t[e]^r[0],u=t[e+1]^r[1],h=t[e+2]^r[2],p=t[e+3]^r[3],f=4,l=1;l<this._nRounds;l++){var d=n[c>>>24]^i[u>>>16&255]^o[h>>>8&255]^s[255&p]^r[f++],y=n[u>>>24]^i[h>>>16&255]^o[p>>>8&255]^s[255&c]^r[f++],b=n[h>>>24]^i[p>>>16&255]^o[c>>>8&255]^s[255&u]^r[f++],g=n[p>>>24]^i[c>>>16&255]^o[u>>>8&255]^s[255&h]^r[f++];c=d,u=y,h=b,p=g}var v=(a[c>>>24]<<24|a[u>>>16&255]<<16|a[h>>>8&255]<<8|a[255&p])^r[f++],m=(a[u>>>24]<<24|a[h>>>16&255]<<16|a[p>>>8&255]<<8|a[255&c])^r[f++],_=(a[h>>>24]<<24|a[p>>>16&255]<<16|a[c>>>8&255]<<8|a[255&u])^r[f++],S=(a[p>>>24]<<24|a[c>>>16&255]<<16|a[u>>>8&255]<<8|a[255&h])^r[f++];t[e]=v,t[e+1]=m,t[e+2]=_,t[e+3]=S},e.keySize=8,e}(nt),bt=[],gt=[],vt=[],mt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.reset=function(){t.prototype.reset.call(this),this._hash=new D(bt.slice(0))},e.prototype._doProcessBlock=function(t,e){for(var r=this._hash.words,n=r[0],i=r[1],o=r[2],s=r[3],a=r[4],c=r[5],u=r[6],h=r[7],p=0;p<64;p++){if(p<16)vt[p]=0|t[e+p];else{var f=vt[p-15],l=(f<<25|f>>>7)^(f<<14|f>>>18)^f>>>3,d=vt[p-2],y=(d<<15|d>>>17)^(d<<13|d>>>19)^d>>>10;vt[p]=l+vt[p-7]+y+vt[p-16]}var b=n&i^n&o^i&o,g=(n<<30|n>>>2)^(n<<19|n>>>13)^(n<<10|n>>>22),v=h+((a<<26|a>>>6)^(a<<21|a>>>11)^(a<<7|a>>>25))+(a&c^~a&u)+gt[p]+vt[p];h=u,u=c,c=a,a=s+v|0,s=o,o=i,i=n,n=v+(g+b)|0}r[0]=r[0]+n|0,r[1]=r[1]+i|0,r[2]=r[2]+o|0,r[3]=r[3]+s|0,r[4]=r[4]+a|0,r[5]=r[5]+c|0,r[6]=r[6]+u|0,r[7]=r[7]+h|0},e.prototype._doFinalize=function(){var t=8*this._nDataBytes,e=8*this._data.sigBytes;return this._data.words[e>>>5]|=128<<24-e%32,this._data.words[14+(e+64>>>9<<4)]=Math.floor(t/4294967296),this._data.words[15+(e+64>>>9<<4)]=t,this._data.sigBytes=4*this._data.words.length,this._process(),this._hash},e}(L),_t=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.processBlock=function(t,e){this._cipher.encryptBlock(t,e)},e}($),St=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.processBlock=function(t,e){this._cipher.decryptBlock(t,e)},e}($),wt=(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}r(e,t),e.Encryptor=_t,e.Decryptor=St}(Y),{BlockCipher:nt,WordArray:D,CipherParams:G,Hasher:L,SerializableCipher:U,PasswordBasedCipher:K}),Et={AES:yt,SHA256:mt},It={Utf8:C,Hex:R},zt=wt.BlockCipher._createHelper(Et.AES),xt=(wt.Hasher._createHelper(Et.SHA256),function(){function t(){}return t.encrypt=function(t,e){var r=JSON.stringify(t);return zt.encrypt(r,e).toString()},t.decrypt=function(t,e){var r=zt.decrypt(t,e).toString(It.Utf8);return JSON.parse(r)},t.randomString=function(t){t||(t=128);for(var e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz",r="",n=0;n<t;n++){var i=Math.floor(Math.random()*e.length);r+=e.substring(i,i+1)}return r},t}()),At=function(){function t(){this.recognizers=[],this.authorizationHeader="",this.exportImages=!1,this.exportFullDocumentImage=!1,this.exportSignatureImage=!1,this.exportFaceImage=!1,this.detectGlare=!1,this.allowBlurFilter=!1,this.anonymizeNetherlandsMrz=!1,this.anonymizeCardNumber=!1,this.anonymizeIban=!1,this.anonymizeCvv=!1,this.anonymizeOwner=!1,this.listeners=[],this.scanFrameQueue=[],this.endpoint="",this.API=new B}return t.prototype.TerminateActiveRequests=function(){this.API.TerminateAll(),this.scanFrameQueue=[]},t.prototype.RegisterListener=function(t){this.listeners.push(t)},t.prototype.ScanFile=function(t,e){return this.scan(t.blob,!0)},t.prototype.SendFile=function(t,e){this.scan(t.blob,!0,e).subscribe(function(){},function(){})},t.prototype.SendFrame=function(e){var r=P.getFrameQuality(e.pixelData);if(this.scanFrameQueue.push({frame:e,quality:r}),!(this.scanFrameQueue.length<t.fromHowManyFramesQualityCalculateBestFrame)){var n,i=0;this.scanFrameQueue.forEach(function(t){t.quality>i&&(i=t.quality,n=t.frame)}),this.scanFrameQueue=[],void 0!==n&&this.scan(n.blob,!1).subscribe(function(){},function(){})}},t.prototype.SetRecognizers=function(t){this.recognizers=t;var e=new CustomEvent("recognizersUpdated",{detail:{recognizers:this.recognizers},cancelable:!0,bubbles:!0});document.dispatchEvent(e)},t.prototype.GetRecognizers=function(){return this.recognizers},t.prototype.SetAuthorization=function(t){this.authorizationHeader=t,this.API.SetAuthorization(t)},t.prototype.GetAuthorization=function(){return this.authorizationHeader},t.prototype.SetExportImages=function(t){this.exportImages=t,this.API.SetExportImages(t)},t.prototype.SetExportFullDocumentImage=function(t){this.exportFullDocumentImage=t,this.API.SetExportFullDocumentImage(t)},t.prototype.SetExportSignatureImage=function(t){this.exportSignatureImage=t,this.API.SetExportSignatureImage(t)},t.prototype.SetExportFaceImage=function(t){this.exportFaceImage=t,this.API.SetExportFaceImage(t)},t.prototype.SetDetectGlare=function(t){this.detectGlare=t,this.API.SetDetectGlare(t)},t.prototype.SetAllowBlurFilter=function(t){this.allowBlurFilter=t,this.API.SetAllowBlurFilter(t)},t.prototype.SetEndpoint=function(t){this.endpoint=t,this.API.SetEndpoint(t)},t.prototype.SetAnonymizeCardNumber=function(t){this.anonymizeCardNumber=t,this.API.SetAnonymizeCardNumber(t)},t.prototype.SetAnonymizeIban=function(t){this.anonymizeIban=t,this.API.SetAnonymizeIban(t)},t.prototype.SetAnonymizeCvv=function(t){this.anonymizeCvv=t,this.API.SetAnonymizeCvv(t)},t.prototype.SetAnonymizeOwner=function(t){this.anonymizeOwner=t,this.API.SetAnonymizeOwner(t)},t.prototype.SetUserId=function(t){this.API.SetUserId(t)},t.prototype.SetIsDataPersistingEnabled=function(t){this.API.SetIsDataPersistingEnabled(t)},t.prototype.SetAnonymizeNetherlandsMrz=function(t){this.anonymizeNetherlandsMrz=t,this.API.SetAnonymizeNetherlandsMrz(t)},t.prototype.IsDesktopToMobileAvailable=function(){return n(this,void 0,void 0,function(){return i(this,function(t){return[2,this.isDesktopToMobileAvailable()]})})},t.prototype.IsRecognizerArraySet=function(){return!!this.recognizers&&(this.recognizers.constructor!==Array||this.recognizers.length>0)},t.prototype.CreateScanExchanger=function(t,e){return n(this,void 0,void 0,function(){var r,o,a=this;return i(this,function(c){switch(c.label){case 0:return t.recognizers=this.recognizers,t.authorizationHeader=this.authorizationHeader,t.exportImages=this.exportImages,t.exportFullDocumentImage=this.exportFullDocumentImage,t.exportSignatureImage=this.exportSignatureImage,t.exportFaceImage=this.exportFaceImage,t.detectGlare=this.detectGlare,t.allowBlurFilter=this.allowBlurFilter,t.anonymizeCardNumber=this.anonymizeCardNumber,t.anonymizeIban=this.anonymizeIban,t.anonymizeCvv=this.anonymizeCvv,t.anonymizeOwner=this.anonymizeOwner,t.endpoint=this.endpoint,t.anonymizeNetherlandsMrz=this.anonymizeNetherlandsMrz,r=xt.randomString(32),t.key=r,t.authorizationHeader=xt.encrypt(t.authorizationHeader,r),[4,M.createScanExchanger(t)];case 1:return o=c.sent(),[2,o.onSnapshot(function(t){return n(a,void 0,void 0,function(){var n,a,c,u,h;return i(this,function(i){switch(i.label){case 0:return(n=t.data()).status===O.Step02_ExchangeLinkIsGenerated&&n.shortLink?[4,M.generateQRCode(n.shortLink)]:[3,2];case 1:a=i.sent(),n.qrCodeAsBase64=a,i.label=2;case 2:return n.status!==O.Step07_ResultIsAvailable||!n.result&&!n.resultUrl?[3,8]:(c=void 0,n.result?(c=xt.decrypt(n.result,r),[3,7]):[3,3]);case 3:return n.resultUrl?(u=xt.decrypt(n.resultUrl,r),[4,fetch(u)]):[3,7];case 4:return[4,i.sent().blob()];case 5:return[4,s(i.sent())];case 6:h=i.sent(),n.result=h,c=xt.decrypt(h,r),firebase.storage().refFromURL(u).delete(),i.label=7;case 7:this.notifyOnSuccessListeners({result:c,sourceBlob:null},!0),o.update({result:null,resultUrl:null}),i.label=8;case 8:return n.status===O.ErrorHappened&&n.error&&this.notifyOnErrorListeners(n.error),e(n),[2]}})})})]}})})},t.prototype.isDesktopToMobileAvailable=function(){return n(this,void 0,void 0,function(){var t;return i(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,firebase.app().firestore().doc("scans/any-document").get()];case 1:return e.sent(),[3,3];case 2:return"FirebaseError"===(t=e.sent()).name&&"unavailable"===t.code?[2,!1]:[3,3];case 3:return[2,!0]}})})},t.prototype.notifyOnSuccessListeners=function(t,e){var r=t.result.data,n=!1;Array.isArray(r)?r.forEach(function(t){t.result&&(n=!0)}):r.result&&(n=!0);(n||e)&&(e||this.TerminateActiveRequests(),this.listeners.forEach(function(e){e.onScanSuccess&&e.onScanSuccess(t)}))},t.prototype.notifyOnErrorListeners=function(t){this.TerminateActiveRequests(),t.code!==x.ResultIsNotValidJSON&&this.listeners.forEach(function(e){e.onScanError&&e.onScanError(t)})},t.prototype.scan=function(t,e,r){var n=this;return new F(function(i){s(t).then(function(o){n.API.Recognize(n.recognizers,o,r).subscribe(function(r){var o={sourceBlob:t,result:r};n.notifyOnSuccessListeners(o,e),i.next(o),i.complete()},function(t){t&&(n.notifyOnErrorListeners(t),i.error(t))})}).catch(function(t){n.notifyOnErrorListeners(t),i.error(t)})})},t.fromHowManyFramesQualityCalculateBestFrame=5,t}();return function(t){var e=new At;t.ScanImage=function(t,r){return e.ScanFile(t,r)},t.RegisterListener=function(t){e.RegisterListener(t)},t.SendImage=function(t,r){return function(t){return!!t.pixelData}(t)?e.SendFrame(t):e.SendFile(t,r)},t.SetRecognizers=function(t){e.SetRecognizers(t)},t.SetAuthorization=function(t){e.SetAuthorization(t)},t.SetExportImages=function(t){e.SetExportImages(t)},t.SetExportFullDocumentImage=function(t){e.SetExportFullDocumentImage(t)},t.SetExportSignatureImage=function(t){e.SetExportSignatureImage(t)},t.SetExportFaceImage=function(t){e.SetExportFaceImage(t)},t.SetDetectGlare=function(t){e.SetDetectGlare(t)},t.SetAllowBlurFilter=function(t){e.SetAllowBlurFilter(t)},t.SetEndpoint=function(t){e.SetEndpoint(t)},t.SetAnonymizeCardNumber=function(t){e.SetAnonymizeCardNumber(t)},t.SetAnonymizeIban=function(t){e.SetAnonymizeIban(t)},t.SetAnonymizeCvv=function(t){e.SetAnonymizeCvv(t)},t.SetAnonymizeOwner=function(t){e.SetAnonymizeOwner(t)},t.SetAnonymizeNetherlandsMrz=function(t){e.SetAnonymizeNetherlandsMrz(t)},t.TerminateRequest=function(){e.TerminateActiveRequests()},t.SetUserId=function(t){e.SetUserId(t)},t.SetIsDataPersistingEnabled=function(t){e.SetIsDataPersistingEnabled(t)},t.StatusCodes=x,t.CreateScanExchanger=function(t,r){return void 0===t&&(t={}),e.CreateScanExchanger(t,r)},t.ScanExchangerCodes=O,t.ExportImageTypes=A,t.Decrypt=function(t,e){return xt.decrypt(t,e)},t.Encrypt=function(t,e){return xt.encrypt(t,e)},t.IsDesktopToMobileAvailable=function(){return n(this,void 0,void 0,function(){return i(this,function(t){return[2,e.IsDesktopToMobileAvailable()]})})},t.IsRecognizerArraySet=function(){return e.IsRecognizerArraySet()}}(t.SDK||(t.SDK={})),t}({});
