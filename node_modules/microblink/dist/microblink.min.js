!function(){"use strict";var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};function t(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}function r(e,t,r,n){return new(r||(r=Promise))(function(o,i){function a(e){try{l(n.next(e))}catch(e){i(e)}}function s(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(a,s)}l((n=n.apply(e,t||[])).next())})}function n(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}function o(e){return new Promise(function(t,r){var n=new FileReader,o="function"==typeof n.readAsBinaryString;n.onloadend=function(){var e=n.result||"";if(o)return t(e);t(function(e){var t="",r=new Uint8Array(e),n=r.byteLength,o=-1;for(;++o<n;)t+=String.fromCharCode(r[o]);return t}(e))},n.onerror=r,o?n.readAsBinaryString(e):n.readAsArrayBuffer(e)})}function i(e){return o(e).then(btoa)}var a="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function s(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function l(e,t){return e(t={exports:{}},t.exports),t.exports}var c=l(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.isFunction=function(e){return"function"==typeof e}});s(c);c.isFunction;var u=l(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=!1;t.config={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){if(e){var t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=e},get useDeprecatedSynchronousErrorHandling(){return r}}});s(u);u.config;var d=l(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.hostReportError=function(e){setTimeout(function(){throw e},0)}});s(d);d.hostReportError;var h=l(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.empty={closed:!0,next:function(e){},error:function(e){if(u.config.useDeprecatedSynchronousErrorHandling)throw e;d.hostReportError(e)},complete:function(){}}});s(h);h.empty;var m=l(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.isArray=Array.isArray||function(e){return e&&"number"==typeof e.length}});s(m);m.isArray;var p=l(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.isObject=function(e){return null!==e&&"object"==typeof e}});s(p);p.isObject;var g=l(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){return Error.call(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map(function(e,t){return t+1+") "+e.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e,this}return e.prototype=Object.create(Error.prototype),e}();t.UnsubscriptionError=r});s(g);g.UnsubscriptionError;var f=l(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._unsubscribe=e)}var t;return e.prototype.unsubscribe=function(){var t;if(!this.closed){var r=this._parentOrParents,o=this._unsubscribe,i=this._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,r instanceof e)r.remove(this);else if(null!==r)for(var a=0;a<r.length;++a){r[a].remove(this)}if(c.isFunction(o))try{o.call(this)}catch(e){t=e instanceof g.UnsubscriptionError?n(e.errors):[e]}if(m.isArray(i)){a=-1;for(var s=i.length;++a<s;){var l=i[a];if(p.isObject(l))try{l.unsubscribe()}catch(e){t=t||[],e instanceof g.UnsubscriptionError?t=t.concat(n(e.errors)):t.push(e)}}}if(t)throw new g.UnsubscriptionError(t)}},e.prototype.add=function(t){var r=t;if(!t)return e.EMPTY;switch(typeof t){case"function":r=new e(t);case"object":if(r===this||r.closed||"function"!=typeof r.unsubscribe)return r;if(this.closed)return r.unsubscribe(),r;if(!(r instanceof e)){var n=r;(r=new e)._subscriptions=[n]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}var o=r._parentOrParents;if(null===o)r._parentOrParents=this;else if(o instanceof e){if(o===this)return r;r._parentOrParents=[o,this]}else{if(-1!==o.indexOf(this))return r;o.push(this)}var i=this._subscriptions;return null===i?this._subscriptions=[r]:i.push(r),r},e.prototype.remove=function(e){var t=this._subscriptions;if(t){var r=t.indexOf(e);-1!==r&&t.splice(r,1)}},e.EMPTY=((t=new e).closed=!0,t),e}();function n(e){return e.reduce(function(e,t){return e.concat(t instanceof g.UnsubscriptionError?t.errors:t)},[])}t.Subscription=r});s(f);f.Subscription;var b=l(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.rxSubscriber="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random(),t.$$rxSubscriber=t.rxSubscriber});s(b);b.rxSubscriber,b.$$rxSubscriber;var v=l(function(e,t){var r,n=a&&a.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(r,n,o){var a=e.call(this)||this;switch(a.syncErrorValue=null,a.syncErrorThrown=!1,a.syncErrorThrowable=!1,a.isStopped=!1,arguments.length){case 0:a.destination=h.empty;break;case 1:if(!r){a.destination=h.empty;break}if("object"==typeof r){r instanceof t?(a.syncErrorThrowable=r.syncErrorThrowable,a.destination=r,r.add(a)):(a.syncErrorThrowable=!0,a.destination=new i(a,r));break}default:a.syncErrorThrowable=!0,a.destination=new i(a,r,n,o)}return a}return n(t,e),t.prototype[b.rxSubscriber]=function(){return this},t.create=function(e,r,n){var o=new t(e,r,n);return o.syncErrorThrowable=!1,o},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this))},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},t.prototype._unsubscribeAndRecycle=function(){var e=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this},t}(f.Subscription);t.Subscriber=o;var i=function(e){function t(t,r,n,o){var i,a=e.call(this)||this;a._parentSubscriber=t;var s=a;return c.isFunction(r)?i=r:r&&(i=r.next,n=r.error,o=r.complete,r!==h.empty&&(s=Object.create(r),c.isFunction(s.unsubscribe)&&a.add(s.unsubscribe.bind(s)),s.unsubscribe=a.unsubscribe.bind(a))),a._context=s,a._next=i,a._error=n,a._complete=o,a}return n(t,e),t.prototype.next=function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;u.config.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}},t.prototype.error=function(e){if(!this.isStopped){var t=this._parentSubscriber,r=u.config.useDeprecatedSynchronousErrorHandling;if(this._error)r&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)r?(t.syncErrorValue=e,t.syncErrorThrown=!0):d.hostReportError(e),this.unsubscribe();else{if(this.unsubscribe(),r)throw e;d.hostReportError(e)}}},t.prototype.complete=function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var r=function(){return e._complete.call(e._context)};u.config.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,r),this.unsubscribe()):(this.__tryOrUnsub(r),this.unsubscribe())}else this.unsubscribe()}},t.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(e){if(this.unsubscribe(),u.config.useDeprecatedSynchronousErrorHandling)throw e;d.hostReportError(e)}},t.prototype.__tryOrSetError=function(e,t,r){if(!u.config.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,r)}catch(t){return u.config.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=t,e.syncErrorThrown=!0,!0):(d.hostReportError(t),!0)}return!1},t.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},t}(o);t.SafeSubscriber=i});s(v);v.Subscriber,v.SafeSubscriber;var y=l(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.canReportError=function(e){for(;e;){var t=e,r=t.closed,n=t.destination,o=t.isStopped;if(r||o)return!1;e=n&&n instanceof v.Subscriber?n:null}return!0}});s(y);y.canReportError;var w=l(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.toSubscriber=function(e,t,r){if(e){if(e instanceof v.Subscriber)return e;if(e[b.rxSubscriber])return e[b.rxSubscriber]()}return e||t||r?new v.Subscriber(e,t,r):new v.Subscriber(h.empty)}});s(w);w.toSubscriber;var A=l(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.observable="function"==typeof Symbol&&Symbol.observable||"@@observable"});s(A);A.observable;var S=l(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.noop=function(){}});s(S);S.noop;var E=l(function(e,t){function r(e){return e?1===e.length?e[0]:function(t){return e.reduce(function(e,t){return t(e)},t)}:S.noop}Object.defineProperty(t,"__esModule",{value:!0}),t.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r(e)},t.pipeFromArray=r});s(E);E.pipe,E.pipeFromArray;var x=l(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this._isScalar=!1,e&&(this._subscribe=e)}return e.prototype.lift=function(t){var r=new e;return r.source=this,r.operator=t,r},e.prototype.subscribe=function(e,t,r){var n=this.operator,o=w.toSubscriber(e,t,r);if(n?o.add(n.call(o,this.source)):o.add(this.source||u.config.useDeprecatedSynchronousErrorHandling&&!o.syncErrorThrowable?this._subscribe(o):this._trySubscribe(o)),u.config.useDeprecatedSynchronousErrorHandling&&o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){u.config.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),y.canReportError(e)?e.error(t):console.warn(t)}},e.prototype.forEach=function(e,t){var r=this;return new(t=n(t))(function(t,n){var o;o=r.subscribe(function(t){try{e(t)}catch(e){n(e),o&&o.unsubscribe()}},n,t)})},e.prototype._subscribe=function(e){var t=this.source;return t&&t.subscribe(e)},e.prototype[A.observable]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 0===e.length?this:E.pipeFromArray(e)(this)},e.prototype.toPromise=function(e){var t=this;return new(e=n(e))(function(e,r){var n;t.subscribe(function(e){return n=e},function(e){return r(e)},function(){return e(n)})})},e.create=function(t){return new e(t)},e}();function n(e){if(e||(e=u.config.Promise||Promise),!e)throw new Error("no Promise impl found");return e}t.Observable=r});s(x);var k,I,B,C=x.Observable;!function(e){e.Ok="OK",e.ResultIsNotValidJSON="RESULT_IS_NOT_VALID_JSON",e.TimedOut="CONNECTION_TIMED_OUT"}(k||(k={})),function(e){e.Face="exportFaceImage",e.FullDocument="exportFullDocumentImage",e.Signature="exportSignatureImage"}(I||(I={})),function(e){e.Step01_RemoteCameraIsRequested="STEP_1_REMOTE_CAMERA_IS_REQUESTED",e.Step02_ExchangeLinkIsGenerated="STEP_2_EXCHANGE_LINK_IS_GENERATED",e.Step03_RemoteCameraIsPending="STEP_3_REMOTE_CAMERA_IS_PENDING",e.Step04_RemoteCameraIsOpen="STEP_4_REMOTE_CAMERA_IS_OPEN",e.Step05_ImageIsUploading="STEP_5_IMAGE_IS_UPLOADING",e.Step06_ImageIsProcessing="STEP_6_IMAGE_IS_PROCESSING",e.Step07_ResultIsAvailable="STEP_7_RESULT_IS_AVAILABLE",e.ErrorHappened="ERROR_HAPPENED"}(B||(B={}));var M="https://api.microblink.com",_=function(){function e(){this.authorizationHeader="",this.exportImages=!1,this.exportFullDocumentImage=!1,this.exportSignatureImage=!1,this.exportFaceImage=!1,this.detectGlare=!1,this.anonymizeCardNumber=!1,this.anonymizeIban=!1,this.anonymizeCvv=!1,this.anonymizeOwner=!1,this.allowBlurFilter=!1,this.anonymizeNetherlandsMrz=!1,this.activeRequests=[],this.userId="",this.isDataPersistingEnabled=!0,this.endpoint=M}return e.prototype.TerminateAll=function(){this.activeRequests.forEach(function(e){e.abort()}),this.activeRequests=[]},e.prototype.SetAuthorization=function(e){this.authorizationHeader=e},e.prototype.SetExportImages=function(e){this.exportImages=e},e.prototype.SetExportFullDocumentImage=function(e){this.exportFullDocumentImage=e},e.prototype.SetExportSignatureImage=function(e){this.exportSignatureImage=e},e.prototype.SetExportFaceImage=function(e){this.exportFaceImage=e},e.prototype.SetDetectGlare=function(e){this.detectGlare=e},e.prototype.SetAllowBlurFilter=function(e){this.allowBlurFilter=e},e.prototype.SetEndpoint=function(e){this.endpoint=e},e.prototype.SetAnonymizeCardNumber=function(e){this.anonymizeCardNumber=e},e.prototype.SetAnonymizeIban=function(e){this.anonymizeIban=e},e.prototype.SetAnonymizeCvv=function(e){this.anonymizeCvv=e},e.prototype.SetAnonymizeOwner=function(e){this.anonymizeOwner=e},e.prototype.SetUserId=function(e){this.userId=e},e.prototype.SetIsDataPersistingEnabled=function(e){this.isDataPersistingEnabled=e},e.prototype.SetAnonymizeNetherlandsMrz=function(e){this.anonymizeNetherlandsMrz=e},e.prototype.Recognize=function(e,t,r){var n=this;return new C(function(o){var i={imageBase64:t};"string"==typeof e?i.recognizer=e:i.recognizers=e,n.exportImages&&(i.exportImages=n.exportImages),n.exportFullDocumentImage&&(i.exportFullDocumentImage=!0),n.exportSignatureImage&&(i.exportSignatureImage=!0),n.exportFaceImage&&(i.exportFaceImage=!0),n.detectGlare&&(i.detectGlare=!0),n.allowBlurFilter&&(i.allowBlurFilter=!0),n.anonymizeCardNumber&&(i.anonymizeCardNumber=!0),n.anonymizeIban&&(i.anonymizeIban=!0),n.anonymizeCvv&&(i.anonymizeCvv=!0),n.anonymizeOwner&&(i.anonymizeOwner=!0),n.userId&&(i.userId=n.userId),!1===n.isDataPersistingEnabled&&(i.disableDataPersisting=!0),n.anonymizeNetherlandsMrz&&(i.anonymizeNetherlandsMrz=!0);var a=JSON.stringify(i),s=new XMLHttpRequest;s.withCredentials=!0,r&&(s.timeout=4e4),s.open("POST",n.endpoint+"/recognize/execute"),s.setRequestHeader("Content-Type","application/json"),n.isAuthorizationHeaderValid&&s.setRequestHeader("Authorization",n.authorizationHeader),s.addEventListener("readystatechange",function(){if(4===this.readyState){var e=null;try{e=JSON.parse(this.responseText),200===this.status?(o.next(e),o.complete()):o.error(e)}catch(t){e=r&&0===this.status?{code:k.TimedOut,message:"Connection timed out. Please try again."}:{error:"Result is not valid JSON",code:k.ResultIsNotValidJSON,responseText:this.responseText},o.error(e)}}}),s.onerror=function(e){o.error(e)},r&&(s.upload.addEventListener("progress",r,!1),s.upload.addEventListener("load",r,!1)),s.send(a),n.activeRequests.push(s)})},Object.defineProperty(e.prototype,"isAuthorizationHeaderValid",{get:function(){return!!(this.authorizationHeader.startsWith("Bearer ")||this.authorizationHeader.startsWith("bearer ")||this.authorizationHeader.startsWith("Basic ")||this.authorizationHeader.startsWith("basic "))},enumerable:!0,configurable:!0}),e}(),z=function(){function e(){}return e.getFrameQuality=function(e){return this.calculateFrameQuality(e.data,e.width,e.height)},e.calculateFrameQuality=function(e,t,r){for(var n=0,o=0,i=0;i<28;i++)for(var a=parseInt((t/29).toString(),10),s=parseInt((a*i+a/2).toString(),10),l=1;l<r-1;l++){var c=this.getIntensity(e,l,s,t),u=this.getIntensity(e,l-1,s,t);o+=1,n+=(d=c-this.getIntensity(e,l+1,s,t)-(u-c))*d}for(i=0;i<20;i++)for(a=parseInt((r/21).toString(),10),l=parseInt((a*i+a/2).toString(),10),s=1;s<t-1;s++){var d;c=this.getIntensity(e,l,s,t),u=this.getIntensity(e,l,s-1,t);o+=1,n+=(d=c-this.getIntensity(e,l,s+1,t)-(u-c))*d}var h=n/o,m=parseFloat((t*r).toString())/307200;return m>1?(m>10&&(m=10),h/=m):h*=m,h},e.getIntensity=function(e,t,r,n){var o=4*(t*n+r);return.2126*e[o]+.7152*e[o+1]+.0722*e[o+2]},e}();try{firebase.firestore().settings({})}catch(e){}for(var R=function(){function e(){}return e.createScanExchanger=function(e){return void 0===e&&(e={}),r(this,void 0,void 0,function(){var t;return n(this,function(r){switch(r.label){case 0:return t=firebase.firestore().collection("scans").doc(),e.status=B.Step01_RemoteCameraIsRequested,e.scanId=t.id,[4,t.set(e)];case 1:return r.sent(),[2,t]}})})},e.generateQRCode=function(e){return r(this,void 0,void 0,function(){var t;return n(this,function(r){switch(r.label){case 0:t=null,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,QRCode.toDataURL(e,{errorCorrectionLevel:"H",type:"image/png",width:1024,margin:4})];case 2:return t=r.sent(),[3,4];case 3:return r.sent(),[3,4];case 4:return[2,t]}})})},e}(),D=function(){function e(){}return e.stringify=function(e){for(var t=[],r=0;r<e.sigBytes;r++){var n=e.words[r>>>2]>>>24-r%4*8&255;t.push((n>>>4).toString(16)),t.push((15&n).toString(16))}return t.join("")},e.parse=function(e){for(var t=e.length,r=[],n=0;n<t;n+=2)r[n>>>3]|=parseInt(e.substr(n,2),16)<<24-n%8*4;return new L(r,t/2)},e}(),L=function(){function e(e,t){this.words=e||[],this.sigBytes=void 0!==t?t:4*this.words.length}return e.random=function(t){for(var r=[],n=function(e){var t=987654321,r=4294967295;return function(){var n=((t=36969*(65535&t)+(t>>16)&r)<<16)+(e=18e3*(65535&e)+(e>>16)&r)&r;return n/=4294967296,(n+=.5)*(Math.random()>.5?1:-1)}},o=0,i=void 0;o<t;o+=4){var a=n(4294967296*(i||Math.random()));i=987654071*a(),r.push(4294967296*a()|0)}return new e(r,t)},e.prototype.toString=function(e){return(e||D).stringify(this)},e.prototype.concat=function(e){if(this.clamp(),this.sigBytes%4)for(var t=0;t<e.sigBytes;t++){var r=e.words[t>>>2]>>>24-t%4*8&255;this.words[this.sigBytes+t>>>2]|=r<<24-(this.sigBytes+t)%4*8}else for(t=0;t<e.sigBytes;t+=4)this.words[this.sigBytes+t>>>2]=e.words[t>>>2];return this.sigBytes+=e.sigBytes,this},e.prototype.clamp=function(){this.words[this.sigBytes>>>2]&=4294967295<<32-this.sigBytes%4*8,this.words.length=Math.ceil(this.sigBytes/4)},e.prototype.clone=function(){return new e(this.words.slice(0),this.sigBytes)},e}(),T=function(){function e(){}return e.stringify=function(e){for(var t=[],r=0;r<e.sigBytes;r++){var n=e.words[r>>>2]>>>24-r%4*8&255;t.push(String.fromCharCode(n))}return t.join("")},e.parse=function(e){for(var t=e.length,r=[],n=0;n<t;n++)r[n>>>2]|=(255&e.charCodeAt(n))<<24-n%4*8;return new L(r,t)},e}(),F=function(){function e(){}return e.stringify=function(e){try{return decodeURIComponent(escape(T.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},e.parse=function(e){return T.parse(unescape(encodeURIComponent(e)))},e}(),O=function(){function e(e){this._minBufferSize=0,this.cfg=Object.assign({blockSize:1},e),this._data=new L,this._nDataBytes=0}return e.prototype.reset=function(){this._data=new L,this._nDataBytes=0},e.prototype._append=function(e){"string"==typeof e&&(e=F.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},e.prototype._process=function(e){if(!this.cfg.blockSize)throw new Error("missing blockSize in config");var t,r=4*this.cfg.blockSize,n=this._data.sigBytes/r,o=(n=e?Math.ceil(n):Math.max((0|n)-this._minBufferSize,0))*this.cfg.blockSize,i=Math.min(4*o,this._data.sigBytes);if(o){for(var a=0;a<o;a+=this.cfg.blockSize)this._doProcessBlock(this._data.words,a);t=this._data.words.splice(0,o),this._data.sigBytes-=i}return new L(t,i)},e.prototype.clone=function(){var e=this.constructor();for(var t in this)this.hasOwnProperty(t)&&(e[t]=this[t]);return e._data=this._data.clone(),e},e}(),P=function(e){function r(t){var r=e.call(this)||this;return r.ciphertext=t.ciphertext,r.key=t.key,r.iv=t.iv,r.salt=t.salt,r.algorithm=t.algorithm,r.mode=t.mode,r.padding=t.padding,r.blockSize=t.blockSize,r.formatter=t.formatter,r}return t(r,e),r.prototype.extend=function(e){return void 0!==e.ciphertext&&(this.ciphertext=e.ciphertext),void 0!==e.key&&(this.key=e.key),void 0!==e.iv&&(this.iv=e.iv),void 0!==e.salt&&(this.salt=e.salt),void 0!==e.algorithm&&(this.algorithm=e.algorithm),void 0!==e.mode&&(this.mode=e.mode),void 0!==e.padding&&(this.padding=e.padding),void 0!==e.blockSize&&(this.blockSize=e.blockSize),void 0!==e.formatter&&(this.formatter=e.formatter),this},r.prototype.toString=function(e){if(e)return e.stringify(this);if(this.formatter)return this.formatter.stringify(this);throw new Error("cipher needs a formatter to be able to convert the result into a string")},r}(function(){return function(){}}()),j=function(){function e(){}return e.stringify=function(e){e.clamp();for(var t=[],r=0;r<e.sigBytes;r+=3)for(var n=(e.words[r>>>2]>>>24-r%4*8&255)<<16|(e.words[r+1>>>2]>>>24-(r+1)%4*8&255)<<8|e.words[r+2>>>2]>>>24-(r+2)%4*8&255,o=0;o<4&&r+.75*o<e.sigBytes;o++)t.push(this._map.charAt(n>>>6*(3-o)&63));var i=this._map.charAt(64);if(i)for(;t.length%4;)t.push(i);return t.join("")},e.parse=function(e){var t=e.length;if(void 0===this._reverseMap){this._reverseMap=[];for(var r=0;r<this._map.length;r++)this._reverseMap[this._map.charCodeAt(r)]=r}var n=this._map.charAt(64);if(n){var o=e.indexOf(n);-1!==o&&(t=o)}return this.parseLoop(e,t,this._reverseMap)},e.parseLoop=function(e,t,r){for(var n=[],o=0,i=0;i<t;i++)if(i%4){var a=r[e.charCodeAt(i-1)]<<i%4*2,s=r[e.charCodeAt(i)]>>>6-i%4*2;n[o>>>2]|=(a|s)<<24-o%4*8,o++}return new L(n,o)},e._map="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",e._reverseMap=void 0,e}(),G=function(){function e(){}return e.stringify=function(e){if(!e.ciphertext)throw new Error("missing ciphertext in params");var t,r=e.ciphertext,n=e.salt;if(n){if("string"==typeof n)throw new Error("salt is expected to be a WordArray");t=new L([1398893684,1701076831]).concat(n).concat(r)}else t=r;return t.toString(j)},e.parse=function(e){var t,r=j.parse(e);return 1398893684===r.words[0]&&1701076831===r.words[1]&&(t=new L(r.words.slice(2,4)),r.words.splice(0,4),r.sigBytes-=16),new P({ciphertext:r,salt:t})},e}(),H=function(){function e(){}return e.encrypt=function(e,t,r,n){var o=Object.assign({},this.cfg,n),i=e.createEncryptor(r,o),a=i.finalize(t);return new P({ciphertext:a,key:r,iv:i.cfg.iv,algorithm:e,mode:i.cfg.mode,padding:i.cfg.padding,blockSize:i.cfg.blockSize,formatter:o.format})},e.decrypt=function(e,t,r,n){var o=Object.assign({},this.cfg,n);if(!o.format)throw new Error("could not determine format");if(!(t=this._parse(t,o.format)).ciphertext)throw new Error("could not determine ciphertext");return e.createDecryptor(r,o).finalize(t.ciphertext)},e._parse=function(e,t){return"string"==typeof e?t.parse(e):e},e.cfg={blockSize:4,iv:new L([]),format:G},e}(),N=function(e){function r(t){var r=e.call(this,Object.assign({blockSize:16},t))||this;return r.reset(),r}return t(r,e),r._createHelper=function(e){return function(t,r){return new e(r).finalize(t)}},r.prototype.update=function(e){return this._append(e),this._process(),this},r.prototype.finalize=function(e){return e&&this._append(e),this._doFinalize()},r}(O),Y=[],q=0
/**
     * @license crypto-ts
     * MIT license
     */;q<64;q++)Y[q]=4294967296*Math.abs(Math.sin(q+1))|0;var U=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return t(r,e),r.FF=function(e,t,r,n,o,i,a){var s=e+(t&r|~t&n)+o+a;return(s<<i|s>>>32-i)+t},r.GG=function(e,t,r,n,o,i,a){var s=e+(t&n|r&~n)+o+a;return(s<<i|s>>>32-i)+t},r.HH=function(e,t,r,n,o,i,a){var s=e+(t^r^n)+o+a;return(s<<i|s>>>32-i)+t},r.II=function(e,t,r,n,o,i,a){var s=e+(r^(t|~n))+o+a;return(s<<i|s>>>32-i)+t},r.prototype.reset=function(){e.prototype.reset.call(this),this._hash=new L([1732584193,4023233417,2562383102,271733878])},r.prototype._doProcessBlock=function(e,t){for(var n=0;n<16;n++){var o=t+n,i=e[o];e[o]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8)}var a=this._hash.words,s=e[t+0],l=e[t+1],c=e[t+2],u=e[t+3],d=e[t+4],h=e[t+5],m=e[t+6],p=e[t+7],g=e[t+8],f=e[t+9],b=e[t+10],v=e[t+11],y=e[t+12],w=e[t+13],A=e[t+14],S=e[t+15],E=a[0],x=a[1],k=a[2],I=a[3];E=r.FF(E,x,k,I,s,7,Y[0]),I=r.FF(I,E,x,k,l,12,Y[1]),k=r.FF(k,I,E,x,c,17,Y[2]),x=r.FF(x,k,I,E,u,22,Y[3]),E=r.FF(E,x,k,I,d,7,Y[4]),I=r.FF(I,E,x,k,h,12,Y[5]),k=r.FF(k,I,E,x,m,17,Y[6]),x=r.FF(x,k,I,E,p,22,Y[7]),E=r.FF(E,x,k,I,g,7,Y[8]),I=r.FF(I,E,x,k,f,12,Y[9]),k=r.FF(k,I,E,x,b,17,Y[10]),x=r.FF(x,k,I,E,v,22,Y[11]),E=r.FF(E,x,k,I,y,7,Y[12]),I=r.FF(I,E,x,k,w,12,Y[13]),k=r.FF(k,I,E,x,A,17,Y[14]),x=r.FF(x,k,I,E,S,22,Y[15]),E=r.GG(E,x,k,I,l,5,Y[16]),I=r.GG(I,E,x,k,m,9,Y[17]),k=r.GG(k,I,E,x,v,14,Y[18]),x=r.GG(x,k,I,E,s,20,Y[19]),E=r.GG(E,x,k,I,h,5,Y[20]),I=r.GG(I,E,x,k,b,9,Y[21]),k=r.GG(k,I,E,x,S,14,Y[22]),x=r.GG(x,k,I,E,d,20,Y[23]),E=r.GG(E,x,k,I,f,5,Y[24]),I=r.GG(I,E,x,k,A,9,Y[25]),k=r.GG(k,I,E,x,u,14,Y[26]),x=r.GG(x,k,I,E,g,20,Y[27]),E=r.GG(E,x,k,I,w,5,Y[28]),I=r.GG(I,E,x,k,c,9,Y[29]),k=r.GG(k,I,E,x,p,14,Y[30]),x=r.GG(x,k,I,E,y,20,Y[31]),E=r.HH(E,x,k,I,h,4,Y[32]),I=r.HH(I,E,x,k,g,11,Y[33]),k=r.HH(k,I,E,x,v,16,Y[34]),x=r.HH(x,k,I,E,A,23,Y[35]),E=r.HH(E,x,k,I,l,4,Y[36]),I=r.HH(I,E,x,k,d,11,Y[37]),k=r.HH(k,I,E,x,p,16,Y[38]),x=r.HH(x,k,I,E,b,23,Y[39]),E=r.HH(E,x,k,I,w,4,Y[40]),I=r.HH(I,E,x,k,s,11,Y[41]),k=r.HH(k,I,E,x,u,16,Y[42]),x=r.HH(x,k,I,E,m,23,Y[43]),E=r.HH(E,x,k,I,f,4,Y[44]),I=r.HH(I,E,x,k,y,11,Y[45]),k=r.HH(k,I,E,x,S,16,Y[46]),x=r.HH(x,k,I,E,c,23,Y[47]),E=r.II(E,x,k,I,s,6,Y[48]),I=r.II(I,E,x,k,p,10,Y[49]),k=r.II(k,I,E,x,A,15,Y[50]),x=r.II(x,k,I,E,h,21,Y[51]),E=r.II(E,x,k,I,y,6,Y[52]),I=r.II(I,E,x,k,u,10,Y[53]),k=r.II(k,I,E,x,b,15,Y[54]),x=r.II(x,k,I,E,l,21,Y[55]),E=r.II(E,x,k,I,g,6,Y[56]),I=r.II(I,E,x,k,S,10,Y[57]),k=r.II(k,I,E,x,m,15,Y[58]),x=r.II(x,k,I,E,w,21,Y[59]),E=r.II(E,x,k,I,d,6,Y[60]),I=r.II(I,E,x,k,v,10,Y[61]),k=r.II(k,I,E,x,c,15,Y[62]),x=r.II(x,k,I,E,f,21,Y[63]),a[0]=a[0]+E|0,a[1]=a[1]+x|0,a[2]=a[2]+k|0,a[3]=a[3]+I|0},r.prototype._doFinalize=function(){var e=this._data,t=e.words,r=8*this._nDataBytes,n=8*e.sigBytes;t[n>>>5]|=128<<24-n%32;var o=Math.floor(r/4294967296),i=r;t[15+(n+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),t[14+(n+64>>>9<<4)]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),e.sigBytes=4*(t.length+1),this._process();for(var a=this._hash,s=a.words,l=0;l<4;l++){var c=s[l];s[l]=16711935&(c<<8|c>>>24)|4278255360&(c<<24|c>>>8)}return a},r}(N),Q=function(){function e(e){this.cfg=Object.assign({keySize:4,hasher:U,iterations:1},e)}return e.prototype.compute=function(e,t){for(var r,n=new this.cfg.hasher,o=new L;o.words.length<this.cfg.keySize;){r&&n.update(r),r=n.update(e).finalize(t),n.reset();for(var i=1;i<this.cfg.iterations;i++)r=n.finalize(r),n.reset();o.concat(r)}return o.sigBytes=4*this.cfg.keySize,o},e}(),$=function(){function e(){}return e.execute=function(e,t,r,n){n||(n=L.random(8));var o=new Q({keySize:t+r}).compute(e,n),i=new L(o.words.slice(t),4*r);return o.sigBytes=4*t,new P({key:o,iv:i,salt:n})},e}(),V=function(){function e(){}return e.encrypt=function(e,t,r,n){var o=Object.assign({},this.cfg,n);if(void 0===o.kdf)throw new Error("missing kdf in config");var i=o.kdf.execute(r,e.keySize,e.ivSize);return void 0!==i.iv&&(o.iv=i.iv),H.encrypt.call(this,e,t,i.key,o).extend(i)},e.decrypt=function(e,t,r,n){var o=Object.assign({},this.cfg,n);if(void 0===o.format)throw new Error("missing format in config");if(t=this._parse(t,o.format),void 0===o.kdf)throw new Error("the key derivation function must be set");var i=o.kdf.execute(r,e.keySize,e.ivSize,t.salt);return void 0!==i.iv&&(o.iv=i.iv),H.decrypt.call(this,e,t,i.key,o)},e._parse=function(e,t){return"string"==typeof e?t.parse(e):e},e.cfg={blockSize:4,iv:new L([]),format:G,kdf:$},e}(),W=function(e){function r(t,r,n){var o=e.call(this,Object.assign({blockSize:1},n))||this;return o._xformMode=t,o._key=r,o.reset(),o}return t(r,e),r.createEncryptor=function(e,t){return new this(this._ENC_XFORM_MODE,e,t)},r.createDecryptor=function(e,t){return new this(this._DEC_XFORM_MODE,e,t)},r._createHelper=function(e){return{encrypt:function(t,r,n){return"string"==typeof r?V.encrypt(e,t,r,n):H.encrypt(e,t,r,n)},decrypt:function(t,r,n){return"string"==typeof r?V.decrypt(e,t,r,n):H.decrypt(e,t,r,n)}}},r.prototype.process=function(e){return this._append(e),this._process()},r.prototype.finalize=function(e){return e&&this._append(e),this._doFinalize()},r._ENC_XFORM_MODE=1,r._DEC_XFORM_MODE=2,r.keySize=4,r.ivSize=4,r}(O),K=function(){function e(e,t){this.init(e,t)}return e.prototype.init=function(e,t){this._cipher=e,this._iv=t},e}(),J=function(){function e(){}return e.createEncryptor=function(e,t){return new(0,this.Encryptor)(e,t)},e.createDecryptor=function(e,t){return new(0,this.Decryptor)(e,t)},e.Encryptor=K,e.Decryptor=K,e}(),X=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return t(r,e),r.prototype.processBlock=function(e,t){if(void 0===this._cipher.cfg.blockSize)throw new Error("missing blockSize in cipher config");this.xorBlock(e,t,this._cipher.cfg.blockSize),this._cipher.encryptBlock(e,t),this._prevBlock=e.slice(t,t+this._cipher.cfg.blockSize)},r.prototype.xorBlock=function(e,t,r){var n;if(this._iv?(n=this._iv,this._iv=void 0):n=this._prevBlock,void 0!==n)for(var o=0;o<r;o++)e[t+o]^=n[o]},r}(K),Z=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return t(r,e),r.prototype.processBlock=function(e,t){if(void 0===this._cipher.cfg.blockSize)throw new Error("missing blockSize in cipher config");var r=e.slice(t,t+this._cipher.cfg.blockSize);this._cipher.decryptBlock(e,t),this.xorBlock(e,t,this._cipher.cfg.blockSize),this._prevBlock=r},r.prototype.xorBlock=function(e,t,r){var n;if(this._iv?(n=this._iv,this._iv=void 0):n=this._prevBlock,void 0!==n)for(var o=0;o<r;o++)e[t+o]^=n[o]},r}(K),ee=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return t(r,e),r.Encryptor=X,r.Decryptor=Z,r}(J),te=function(){function e(){}return e.pad=function(e,t){for(var r=4*t,n=r-e.sigBytes%r,o=n<<24|n<<16|n<<8|n,i=[],a=0;a<n;a+=4)i.push(o);var s=new L(i,n);e.concat(s)},e.unpad=function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t},e}(),re=function(e){function r(t,r,n){return e.call(this,t,r,Object.assign({blockSize:4,mode:ee,padding:te},n))||this}return t(r,e),r.prototype.reset=function(){if(e.prototype.reset.call(this),void 0===this.cfg.mode)throw new Error("missing mode in config");var t;this._xformMode===this.constructor._ENC_XFORM_MODE?t=this.cfg.mode.createEncryptor:(t=this.cfg.mode.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator===t?this._mode.init(this,this.cfg.iv&&this.cfg.iv.words):(this._mode=t.call(this.cfg.mode,this,this.cfg.iv&&this.cfg.iv.words),this._mode.__creator=t)},r.prototype._doProcessBlock=function(e,t){this._mode.processBlock(e,t)},r.prototype._doFinalize=function(){if(void 0===this.cfg.padding)throw new Error("missing padding in config");var e;if(this._xformMode===this.constructor._ENC_XFORM_MODE){if(void 0===this.cfg.blockSize)throw new Error("missing blockSize in config");this.cfg.padding.pad(this._data,this.cfg.blockSize),e=this._process(!0)}else e=this._process(!0),this.cfg.padding.unpad(e);return e},r}(W),ne=[],oe=[],ie=[],ae=[],se=[],le=[],ce=[],ue=[],de=[],he=[];!function(){for(var e=[],t=0;t<256;t++)e[t]=t<128?t<<1:t<<1^283;var r=0,n=0;for(t=0;t<256;t++){var o=n^n<<1^n<<2^n<<3^n<<4;o=o>>>8^255&o^99,ne[r]=o,oe[o]=r;var i=e[r],a=e[i],s=e[a],l=257*e[o]^16843008*o;ie[r]=l<<24|l>>>8,ae[r]=l<<16|l>>>16,se[r]=l<<8|l>>>24,le[r]=l,l=16843009*s^65537*a^257*i^16843008*r,ce[o]=l<<24|l>>>8,ue[o]=l<<16|l>>>16,de[o]=l<<8|l>>>24,he[o]=l,r?(r=i^e[e[e[s^i]]],n^=e[e[n]]):r=n=1}}();var me,pe=[0,1,2,4,8,16,32,64,128,27,54],ge=function(e){function r(t,r,n){return e.call(this,t,r,n)||this}return t(r,e),r.prototype.reset=function(){if(e.prototype.reset.call(this),!this._nRounds||this._keyPriorReset!==this._key){for(var t=this._keyPriorReset=this._key,r=t.words,n=t.sigBytes/4,o=4*((this._nRounds=n+6)+1),i=this._keySchedule=[],a=0;a<o;a++)if(a<n)i[a]=r[a];else{var s=i[a-1];a%n?n>6&&a%n==4&&(s=ne[s>>>24]<<24|ne[s>>>16&255]<<16|ne[s>>>8&255]<<8|ne[255&s]):(s=ne[(s=s<<8|s>>>24)>>>24]<<24|ne[s>>>16&255]<<16|ne[s>>>8&255]<<8|ne[255&s],s^=pe[a/n|0]<<24),i[a]=i[a-n]^s}for(var l=this._invKeySchedule=[],c=0;c<o;c++){a=o-c,s=void 0;s=c%4?i[a]:i[a-4],l[c]=c<4||a<=4?s:ce[ne[s>>>24]]^ue[ne[s>>>16&255]]^de[ne[s>>>8&255]]^he[ne[255&s]]}}},r.prototype.encryptBlock=function(e,t){this._doCryptBlock(e,t,this._keySchedule,ie,ae,se,le,ne)},r.prototype.decryptBlock=function(e,t){var r=e[t+1];e[t+1]=e[t+3],e[t+3]=r,this._doCryptBlock(e,t,this._invKeySchedule,ce,ue,de,he,oe),r=e[t+1],e[t+1]=e[t+3],e[t+3]=r},r.prototype._doCryptBlock=function(e,t,r,n,o,i,a,s){for(var l=e[t]^r[0],c=e[t+1]^r[1],u=e[t+2]^r[2],d=e[t+3]^r[3],h=4,m=1;m<this._nRounds;m++){var p=n[l>>>24]^o[c>>>16&255]^i[u>>>8&255]^a[255&d]^r[h++],g=n[c>>>24]^o[u>>>16&255]^i[d>>>8&255]^a[255&l]^r[h++],f=n[u>>>24]^o[d>>>16&255]^i[l>>>8&255]^a[255&c]^r[h++],b=n[d>>>24]^o[l>>>16&255]^i[c>>>8&255]^a[255&u]^r[h++];l=p,c=g,u=f,d=b}var v=(s[l>>>24]<<24|s[c>>>16&255]<<16|s[u>>>8&255]<<8|s[255&d])^r[h++],y=(s[c>>>24]<<24|s[u>>>16&255]<<16|s[d>>>8&255]<<8|s[255&l])^r[h++],w=(s[u>>>24]<<24|s[d>>>16&255]<<16|s[l>>>8&255]<<8|s[255&c])^r[h++],A=(s[d>>>24]<<24|s[l>>>16&255]<<16|s[c>>>8&255]<<8|s[255&u])^r[h++];e[t]=v,e[t+1]=y,e[t+2]=w,e[t+3]=A},r.keySize=8,r}(re),fe=[],be=[],ve=[],ye=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return t(r,e),r.prototype.reset=function(){e.prototype.reset.call(this),this._hash=new L(fe.slice(0))},r.prototype._doProcessBlock=function(e,t){for(var r=this._hash.words,n=r[0],o=r[1],i=r[2],a=r[3],s=r[4],l=r[5],c=r[6],u=r[7],d=0;d<64;d++){if(d<16)ve[d]=0|e[t+d];else{var h=ve[d-15],m=(h<<25|h>>>7)^(h<<14|h>>>18)^h>>>3,p=ve[d-2],g=(p<<15|p>>>17)^(p<<13|p>>>19)^p>>>10;ve[d]=m+ve[d-7]+g+ve[d-16]}var f=n&o^n&i^o&i,b=(n<<30|n>>>2)^(n<<19|n>>>13)^(n<<10|n>>>22),v=u+((s<<26|s>>>6)^(s<<21|s>>>11)^(s<<7|s>>>25))+(s&l^~s&c)+be[d]+ve[d];u=c,c=l,l=s,s=a+v|0,a=i,i=o,o=n,n=v+(b+f)|0}r[0]=r[0]+n|0,r[1]=r[1]+o|0,r[2]=r[2]+i|0,r[3]=r[3]+a|0,r[4]=r[4]+s|0,r[5]=r[5]+l|0,r[6]=r[6]+c|0,r[7]=r[7]+u|0},r.prototype._doFinalize=function(){var e=8*this._nDataBytes,t=8*this._data.sigBytes;return this._data.words[t>>>5]|=128<<24-t%32,this._data.words[14+(t+64>>>9<<4)]=Math.floor(e/4294967296),this._data.words[15+(t+64>>>9<<4)]=e,this._data.sigBytes=4*this._data.words.length,this._process(),this._hash},r}(N),we=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return t(r,e),r.prototype.processBlock=function(e,t){this._cipher.encryptBlock(e,t)},r}(K),Ae=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return t(r,e),r.prototype.processBlock=function(e,t){this._cipher.decryptBlock(e,t)},r}(K),Se=(function(e){function r(){return null!==e&&e.apply(this,arguments)||this}t(r,e),r.Encryptor=we,r.Decryptor=Ae}(J),{BlockCipher:re,WordArray:L,CipherParams:P,Hasher:N,SerializableCipher:H,PasswordBasedCipher:V}),Ee={AES:ge,SHA256:ye},xe={Utf8:F,Hex:D},ke=Se.BlockCipher._createHelper(Ee.AES),Ie=(Se.Hasher._createHelper(Ee.SHA256),function(){function e(){}return e.encrypt=function(e,t){var r=JSON.stringify(e);return ke.encrypt(r,t).toString()},e.decrypt=function(e,t){var r=ke.decrypt(e,t).toString(xe.Utf8);return JSON.parse(r)},e.randomString=function(e){e||(e=128);for(var t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz",r="",n=0;n<e;n++){var o=Math.floor(Math.random()*t.length);r+=t.substring(o,o+1)}return r},e}()),Be=function(){function e(){this.recognizers=[],this.authorizationHeader="",this.exportImages=!1,this.exportFullDocumentImage=!1,this.exportSignatureImage=!1,this.exportFaceImage=!1,this.detectGlare=!1,this.allowBlurFilter=!1,this.anonymizeNetherlandsMrz=!1,this.anonymizeCardNumber=!1,this.anonymizeIban=!1,this.anonymizeCvv=!1,this.anonymizeOwner=!1,this.listeners=[],this.scanFrameQueue=[],this.endpoint="",this.API=new _}return e.prototype.TerminateActiveRequests=function(){this.API.TerminateAll(),this.scanFrameQueue=[]},e.prototype.RegisterListener=function(e){this.listeners.push(e)},e.prototype.ScanFile=function(e,t){return this.scan(e.blob,!0)},e.prototype.SendFile=function(e,t){this.scan(e.blob,!0,t).subscribe(function(){},function(){})},e.prototype.SendFrame=function(t){var r=z.getFrameQuality(t.pixelData);if(this.scanFrameQueue.push({frame:t,quality:r}),!(this.scanFrameQueue.length<e.fromHowManyFramesQualityCalculateBestFrame)){var n,o=0;this.scanFrameQueue.forEach(function(e){e.quality>o&&(o=e.quality,n=e.frame)}),this.scanFrameQueue=[],void 0!==n&&this.scan(n.blob,!1).subscribe(function(){},function(){})}},e.prototype.SetRecognizers=function(e){this.recognizers=e;var t=new CustomEvent("recognizersUpdated",{detail:{recognizers:this.recognizers},cancelable:!0,bubbles:!0});document.dispatchEvent(t)},e.prototype.GetRecognizers=function(){return this.recognizers},e.prototype.SetAuthorization=function(e){this.authorizationHeader=e,this.API.SetAuthorization(e)},e.prototype.GetAuthorization=function(){return this.authorizationHeader},e.prototype.SetExportImages=function(e){this.exportImages=e,this.API.SetExportImages(e)},e.prototype.SetExportFullDocumentImage=function(e){this.exportFullDocumentImage=e,this.API.SetExportFullDocumentImage(e)},e.prototype.SetExportSignatureImage=function(e){this.exportSignatureImage=e,this.API.SetExportSignatureImage(e)},e.prototype.SetExportFaceImage=function(e){this.exportFaceImage=e,this.API.SetExportFaceImage(e)},e.prototype.SetDetectGlare=function(e){this.detectGlare=e,this.API.SetDetectGlare(e)},e.prototype.SetAllowBlurFilter=function(e){this.allowBlurFilter=e,this.API.SetAllowBlurFilter(e)},e.prototype.SetEndpoint=function(e){this.endpoint=e,this.API.SetEndpoint(e)},e.prototype.SetAnonymizeCardNumber=function(e){this.anonymizeCardNumber=e,this.API.SetAnonymizeCardNumber(e)},e.prototype.SetAnonymizeIban=function(e){this.anonymizeIban=e,this.API.SetAnonymizeIban(e)},e.prototype.SetAnonymizeCvv=function(e){this.anonymizeCvv=e,this.API.SetAnonymizeCvv(e)},e.prototype.SetAnonymizeOwner=function(e){this.anonymizeOwner=e,this.API.SetAnonymizeOwner(e)},e.prototype.SetUserId=function(e){this.API.SetUserId(e)},e.prototype.SetIsDataPersistingEnabled=function(e){this.API.SetIsDataPersistingEnabled(e)},e.prototype.SetAnonymizeNetherlandsMrz=function(e){this.anonymizeNetherlandsMrz=e,this.API.SetAnonymizeNetherlandsMrz(e)},e.prototype.IsDesktopToMobileAvailable=function(){return r(this,void 0,void 0,function(){return n(this,function(e){return[2,this.isDesktopToMobileAvailable()]})})},e.prototype.IsRecognizerArraySet=function(){return!!this.recognizers&&(this.recognizers.constructor!==Array||this.recognizers.length>0)},e.prototype.CreateScanExchanger=function(e,t){return r(this,void 0,void 0,function(){var o,a,s=this;return n(this,function(l){switch(l.label){case 0:return e.recognizers=this.recognizers,e.authorizationHeader=this.authorizationHeader,e.exportImages=this.exportImages,e.exportFullDocumentImage=this.exportFullDocumentImage,e.exportSignatureImage=this.exportSignatureImage,e.exportFaceImage=this.exportFaceImage,e.detectGlare=this.detectGlare,e.allowBlurFilter=this.allowBlurFilter,e.anonymizeCardNumber=this.anonymizeCardNumber,e.anonymizeIban=this.anonymizeIban,e.anonymizeCvv=this.anonymizeCvv,e.anonymizeOwner=this.anonymizeOwner,e.endpoint=this.endpoint,e.anonymizeNetherlandsMrz=this.anonymizeNetherlandsMrz,o=Ie.randomString(32),e.key=o,e.authorizationHeader=Ie.encrypt(e.authorizationHeader,o),[4,R.createScanExchanger(e)];case 1:return a=l.sent(),[2,a.onSnapshot(function(e){return r(s,void 0,void 0,function(){var r,s,l,c,u;return n(this,function(n){switch(n.label){case 0:return(r=e.data()).status===B.Step02_ExchangeLinkIsGenerated&&r.shortLink?[4,R.generateQRCode(r.shortLink)]:[3,2];case 1:s=n.sent(),r.qrCodeAsBase64=s,n.label=2;case 2:return r.status!==B.Step07_ResultIsAvailable||!r.result&&!r.resultUrl?[3,8]:(l=void 0,r.result?(l=Ie.decrypt(r.result,o),[3,7]):[3,3]);case 3:return r.resultUrl?(c=Ie.decrypt(r.resultUrl,o),[4,fetch(c)]):[3,7];case 4:return[4,n.sent().blob()];case 5:return[4,i(n.sent())];case 6:u=n.sent(),r.result=u,l=Ie.decrypt(u,o),firebase.storage().refFromURL(c).delete(),n.label=7;case 7:this.notifyOnSuccessListeners({result:l,sourceBlob:null},!0),a.update({result:null,resultUrl:null}),n.label=8;case 8:return r.status===B.ErrorHappened&&r.error&&this.notifyOnErrorListeners(r.error),t(r),[2]}})})})]}})})},e.prototype.isDesktopToMobileAvailable=function(){return r(this,void 0,void 0,function(){var e;return n(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,firebase.app().firestore().doc("scans/any-document").get()];case 1:return t.sent(),[3,3];case 2:return"FirebaseError"===(e=t.sent()).name&&"unavailable"===e.code?[2,!1]:[3,3];case 3:return[2,!0]}})})},e.prototype.notifyOnSuccessListeners=function(e,t){var r=e.result.data,n=!1;Array.isArray(r)?r.forEach(function(e){e.result&&(n=!0)}):r.result&&(n=!0);(n||t)&&(t||this.TerminateActiveRequests(),this.listeners.forEach(function(t){t.onScanSuccess&&t.onScanSuccess(e)}))},e.prototype.notifyOnErrorListeners=function(e){this.TerminateActiveRequests(),e.code!==k.ResultIsNotValidJSON&&this.listeners.forEach(function(t){t.onScanError&&t.onScanError(e)})},e.prototype.scan=function(e,t,r){var n=this;return new C(function(o){i(e).then(function(i){n.API.Recognize(n.recognizers,i,r).subscribe(function(r){var i={sourceBlob:e,result:r};n.notifyOnSuccessListeners(i,t),o.next(i),o.complete()},function(e){e&&(n.notifyOnErrorListeners(e),o.error(e))})}).catch(function(e){n.notifyOnErrorListeners(e),o.error(e)})})},e.fromHowManyFramesQualityCalculateBestFrame=5,e}();!function(e){var t=new Be;e.ScanImage=function(e,r){return t.ScanFile(e,r)},e.RegisterListener=function(e){t.RegisterListener(e)},e.SendImage=function(e,r){return function(e){return!!e.pixelData}(e)?t.SendFrame(e):t.SendFile(e,r)},e.SetRecognizers=function(e){t.SetRecognizers(e)},e.SetAuthorization=function(e){t.SetAuthorization(e)},e.SetExportImages=function(e){t.SetExportImages(e)},e.SetExportFullDocumentImage=function(e){t.SetExportFullDocumentImage(e)},e.SetExportSignatureImage=function(e){t.SetExportSignatureImage(e)},e.SetExportFaceImage=function(e){t.SetExportFaceImage(e)},e.SetDetectGlare=function(e){t.SetDetectGlare(e)},e.SetAllowBlurFilter=function(e){t.SetAllowBlurFilter(e)},e.SetEndpoint=function(e){t.SetEndpoint(e)},e.SetAnonymizeCardNumber=function(e){t.SetAnonymizeCardNumber(e)},e.SetAnonymizeIban=function(e){t.SetAnonymizeIban(e)},e.SetAnonymizeCvv=function(e){t.SetAnonymizeCvv(e)},e.SetAnonymizeOwner=function(e){t.SetAnonymizeOwner(e)},e.SetAnonymizeNetherlandsMrz=function(e){t.SetAnonymizeNetherlandsMrz(e)},e.TerminateRequest=function(){t.TerminateActiveRequests()},e.SetUserId=function(e){t.SetUserId(e)},e.SetIsDataPersistingEnabled=function(e){t.SetIsDataPersistingEnabled(e)},e.StatusCodes=k,e.CreateScanExchanger=function(e,r){return void 0===e&&(e={}),t.CreateScanExchanger(e,r)},e.ScanExchangerCodes=B,e.ExportImageTypes=I,e.Decrypt=function(e,t){return Ie.decrypt(e,t)},e.Encrypt=function(e,t){return Ie.encrypt(e,t)},e.IsDesktopToMobileAvailable=function(){return r(this,void 0,void 0,function(){return n(this,function(e){return[2,t.IsDesktopToMobileAvailable()]})})},e.IsRecognizerArraySet=function(){return t.IsRecognizerArraySet()}}(me||(me={}));var Ce='<style>:host{all:initial;contain:content;display:block;width:100%;height:100%;box-sizing:border-box;border-style:solid;--mb-hem:1rem;--mb-widget-font-family:Helvetica,Tahoma,Verdana,Arial,sans-serif;--mb-widget-border-width:0;--mb-widget-border-color:black;--mb-widget-background-color:white;--mb-default-font-color:black;--mb-alt-font-color:#575757;--mb-btn-font-color:white;--mb-btn-background-color:#48b2e8;--mb-btn-background-color-hover:#26a4e4;--mb-btn-flip-color:white;--mb-btn-alt-font-color:black;--mb-btn-alt-background-color:white;--mb-btn-border-radius:0;--mb-btn-intro-stroke-color:black;--mb-btn-intro-stroke-color-hover:white;--mb-btn-intro-circle-color:#f2f2f2;--mb-btn-intro-circle-color-hover:#48b2e8;--mb-btn-container-border-color:lightgrey;--mb-spinner-border-width:6px;--mb-tabs-background-color:black;--mb-tabs-font-color:white;--mb-tabs-border-width:4px;--mb-btn-icon-cancel-color:white;--mb-dropzone-hover-color:rgba(72, 178, 232, 0.2);--mb-dropzone-circle-color:#48b2e8;--mb-dropzone-icon-color:black;--mb-loader-font-color:black;--mb-loader-background-color:#48b2e8;--mb-card-layout-border-color:black;--mb-tabs-hover-color:#26a4e4;--mb-tabs-active-color:#48b2e8;--mb-json-color-key:black;--mb-json-color-string:#48b2e8;--mb-json-color-boolean:#26a4e4;--mb-json-color-number:black;--mb-json-color-null:#26a4e4;--mb-results-border-color:#dee2e6;--mb-results-image-border-radius:6px;--mb-results-image-background-color:#f2f2f2;--mb-dialog-title-color:black;--mb-dialog-message-color:#575757;--mb-photo-icon-primary:white;--mb-photo-icon-accent:#48b2e8;font-family:var(--mb-widget-font-family);border-width:var(--mb-widget-border-width);border-color:var(--mb-widget-border-color);font-size:var(--mb-hem);background-color:var(--mb-widget-background-color)}:host([webcam=off]) #cameraLocalBtn{display:none}:host([upload=off]) #fileBtn{display:none}.container{height:100%;width:100%;margin:auto;box-sizing:border-box;position:relative}button{font-family:inherit;cursor:pointer;font-size:calc(.9 * var(--mb-hem));font-weight:500;line-height:1;padding:.7222222222em 0;user-select:none;border:1px solid transparent;outline:0;color:var(--mb-btn-font-color);background-color:var(--mb-btn-background-color);transition:color .15s ease-in-out,background-color .15s ease-in-out;width:calc(7.5 * var(--mb-hem));border-radius:var(--mb-btn-border-radius)}button:hover{background-color:var(--mb-btn-background-color-hover)}button#flipBtn{background-color:transparent;background-size:auto;position:absolute;bottom:var(--mb-hem);right:var(--mb-hem);margin:0;padding:0;width:calc(2.2 * var(--mb-hem));display:flex;justify-content:center;align-items:center}#flipBtn svg path{stroke:var(--mb-btn-flip-color)}#flipBtn svg .fill{fill:var(--mb-btn-flip-color)}button#cancelBtnConfirmImage,button#cancelBtnLocalCamera,button#cancelBtnRemoteCamera{background-color:transparent;background-size:auto;position:absolute;top:var(--mb-hem);right:var(--mb-hem);margin:0;padding:0;width:calc(1.6 * var(--mb-hem));display:flex;justify-content:center;align-items:center;z-index:999}#cancelBtnConfirmImage svg path,#cancelBtnLocalCamera svg path,#cancelBtnRemoteCamera svg path{stroke:var(--mb-btn-icon-cancel-color);fill:var(--mb-btn-icon-cancel-color)}.intro{text-align:center}.tabs>.container{height:calc(100% - 56px)}.tab-container{background:var(--mb-tabs-background-color);color:var(--mb-tabs-font-color);height:calc(2.8 * var(--mb-hem));display:none;margin:0;padding:0}.tabs .tab-container{display:flex;justify-content:center}.tab{text-align:center;line-height:calc(2.8 * var(--mb-hem));cursor:pointer;margin:0 calc(.5 * var(--mb-hem));width:calc(10 * var(--mb-hem))}.tab label{display:inline-block;margin:auto;padding:0 calc(1.25 * var(--mb-hem));width:100%;box-sizing:border-box;border-bottom:var(--mb-tabs-border-width) solid transparent;height:calc(2.8 * var(--mb-hem));user-select:none;cursor:inherit;white-space:nowrap}.tab.active label{color:var(--mb-tabs-active-color);border-bottom-color:var(--mb-tabs-active-color)}.tab:hover label{color:var(--mb-tabs-hover-color);border-bottom-color:var(--mb-tabs-hover-color)}#introTab{margin-right:auto;text-align:left}#introTab label,#introTab:hover label{color:var(--mb-tabs-active-color);border-bottom-color:transparent;min-width:unset;padding:0 calc(.5 * var(--mb-hem))}#introTab label svg{width:var(--mb-hem);margin-right:calc(.5 * var(--mb-hem))}#introTab label svg path{fill:var(--mb-tabs-active-color)}.tab-container::after{content:"";margin-left:auto;width:calc(10 * var(--mb-hem));flex-shrink:1000}.intro .flex-horizontal{display:flex;justify-content:center;align-items:flex-start;flex-wrap:wrap;min-height:calc(9.2 * var(--mb-hem))}.intro .flex-vertical{display:flex;justify-content:center;align-items:center;flex-direction:column;height:100%}.intro-label{color:var(--mb-default-font-color);user-select:none}.intro-button{background-color:transparent;width:calc(7 * var(--mb-hem));margin:0 calc(.5 * var(--mb-hem))}.intro-button:hover{background-color:transparent}.intro-button .circle{width:calc(5 * var(--mb-hem));height:calc(5 * var(--mb-hem));border-radius:50%;margin:0 auto;background-color:var(--mb-btn-intro-circle-color)}.intro-button:hover .circle{background-color:var(--mb-btn-intro-circle-color-hover)}.intro-button svg{width:calc(.7 * 100%);height:calc(.7 * 100%);margin:calc(.15 * 100%) auto;stroke:var(--mb-btn-intro-stroke-color)}.intro-button:hover svg{stroke:var(--mb-btn-intro-stroke-color-hover)}.intro-button p{color:var(--mb-alt-font-color);font-size:calc(.8 * var(--mb-hem));font-weight:400;line-height:130%;margin-top:calc(.5 * var(--mb-hem));margin-bottom:0}.dropzone *{pointer-events:none}.dropzone button{pointer-events:auto}.dropzone.draghover button{pointer-events:none}.draghover>div:first-child{opacity:.1}#dragMask{display:none}.draghover #dragMask{background-color:var(--mb-dropzone-hover-color);cursor:copy;position:absolute;width:100%;height:100%;z-index:999;top:0;left:0;right:0;bottom:0;display:flex;align-items:center;justify-content:center}.draghover #dropButton .circle,.draghover #dropButton:hover .circle{background-color:var(--mb-dropzone-circle-color)}.draghover #dropButton .circle svg,.draghover #dropButton:hover .circle svg{stroke:var(--mb-dropzone-icon-color)}#file{display:none}.video,.video.show{display:flex;justify-content:center;text-align:center;overflow:hidden}#flipBtn.flipped,video.flipped{-ms-transform:scaleX(-1);-webkit-transform:scaleX(-1);transform:scaleX(-1)}video{height:100%;z-index:0}#cardPlacer{position:absolute;top:50%;left:50%;box-sizing:border-box;transform:translate(-50%,-50%);border:solid rgba(0,0,0,.4);font-size:0}#cardPlacer .corner{position:absolute;display:block;z-index:200;width:calc(1.3 * var(--mb-hem));height:calc(.9 * var(--mb-hem));box-sizing:border-box;border:0 solid #fff}#cardPlacer .corner-top{top:calc(var(--mb-hem)/ -8);border-top-width:calc(var(--mb-hem)/ 4)}#cardPlacer .corner-bottom{bottom:calc(var(--mb-hem)/ -8);border-bottom-width:calc(var(--mb-hem)/ 4)}#cardPlacer .corner-left{left:calc(var(--mb-hem)/ -8);border-left-width:calc(var(--mb-hem)/ 4)}#cardPlacer .corner-right{right:calc(var(--mb-hem)/ -8);border-right-width:calc(var(--mb-hem)/ 4)}.confirm-image,.dialog,.pending-container{display:none;position:absolute;z-index:1000;top:0;bottom:0;left:0;right:0}.pending-container{background-color:var(--mb-loader-background-color);flex-direction:column;color:var(--mb-loader-font-color)}.pending-container h2{font-size:calc(1.4 * var(--mb-hem));margin:calc(1.4 *var(--mb-hem)) 0 0;font-weight:500}.confirm-image.show,.dialog.show,.pending-container.show{display:flex;align-items:center;justify-content:center;flex-direction:column}.loader-img{display:block;position:relative;margin:0;text-align:center;font-size:0}.container.remote-camera{display:flex;flex-direction:column;align-items:center;justify-content:center;overflow:hidden}.container.remote-camera a{color:#000;font-weight:700}.dialog{background-color:var(--mb-widget-background-color);text-align:center;user-select:none}.dialog .title{color:var(--mb-dialog-title-color);font-size:var(--mb-hem);line-height:150%;max-width:calc(23 * var(--mb-hem));margin-bottom:calc(.4 * var(--mb-hem))}.dialog .message{color:var(--mb-dialog-message-color);font-size:calc(.8 * var(--mb-hem));line-height:130%;max-width:calc(23 * var(--mb-hem));margin-bottom:calc(.8 * var(--mb-hem))}.container.hidden{display:none}.hidden{display:none}.show{display:block}.container.main{background-color:var(--mb-widget-background-color)}.container.main>*{display:none}.container.main>.active{display:block}.container.main>.image.active{display:block;overflow:hidden}.container.main>.json{padding:calc(.7 * var(--mb-hem)) calc(1.5 * var(--mb-hem));overflow:auto;font-size:calc(.9 * var(--mb-hem));line-height:calc(1.5 * var(--mb-hem));position:relative;-webkit-overflow-scrolling:touch}.json>div{white-space:pre}.json .key{color:var(--mb-json-color-key)}.json .string{color:var(--mb-json-color-string)}.json .number{color:var(--mb-json-color-number)}.json .null{color:var(--mb-json-color-null)}.json .boolean{color:var(--mb-json-color-boolean)}#copyBtn{font-size:calc(.8 * var(--mb-hem));padding:0 calc(.8 * var(--mb-hem));line-height:calc(1.9 * var(--mb-hem));height:calc(1.9 * var(--mb-hem));box-sizing:content-box;width:auto;position:absolute;top:calc(1.5 * var(--mb-hem));right:calc(1.5 * var(--mb-hem))}#copyBtn:active{cursor:wait}.cpyTxtArea{position:absolute;left:-9999px;top:-9999px}.container.results{overflow:auto;-webkit-overflow-scrolling:touch}.results .resultTable .row{padding:calc(.8 * var(--mb-hem)) var(--mb-hem);border-bottom:1px solid var(--mb-results-border-color);display:flex;align-items:flex-start;overflow:hidden}.results .resultTable .row.heading{align-items:center}.results .resultTable .row .label{font-size:calc(.8 * var(--mb-hem));color:var(--mb-alt-font-color);line-height:130%;flex-basis:calc(11 * var(--mb-hem));padding-right:var(--mb-hem);flex-shrink:0}.results .resultTable .row .content{font-size:calc(.8 * var(--mb-hem));color:var(--mb-default-font-color);line-height:130%;flex-shrink:1000;overflow:hidden;text-overflow:ellipsis}.results .resultTable .heading .faceImage,.results .resultTable .row .fullDocument,.results .resultTable .row .signature{font-size:0}.results .resultTable .heading .faceImage img{border-radius:var(--mb-results-image-border-radius);max-height:calc(5 * var(--mb-hem));margin-right:var(--mb-hem)}.results .resultTable .heading .headingText .fullName{color:var(--mb-default-font-color);margin-bottom:calc(.2 * var(--mb-hem));font-size:var(--mb-hem);line-height:130%;font-weight:500}.results .resultTable .heading .headingText .recognizerType{color:var(--mb-alt-font-color);font-size:calc(.8 * var(--mb-hem));line-height:130%;font-weight:500}.results .resultTable .row .signature img{border-radius:var(--mb-results-image-border-radius);max-height:calc(3 * var(--mb-hem))}.results .resultTable .row .fullDocument img{border-radius:var(--mb-results-image-border-radius);max-height:calc(17 * var(--mb-hem));max-width:100%}.results .no-result{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);text-align:center;width:80%}.results .masked-label{text-align:center;margin:var(--mb-hem);line-height:1.5;font-weight:500}.confirm-image .image-container img,.container.image img{width:100%;height:auto;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);max-width:100%;max-height:100%;object-fit:contain}#photoBtn{position:absolute;top:50%;left:50%;transform:translate(-50%,calc(-50% + .45 * var(--mb-hem) + .75 * var(--mb-hem)));padding:0;background-color:transparent;width:unset;max-width:calc(7.5 * var(--mb-hem));font-size:0;font-weight:500;user-select:none}#photoBtn svg{width:calc(5 * var(--mb-hem))}#photoBtn p{font-size:calc(.8 * var(--mb-hem));margin:calc(.8 * var(--mb-hem))}#counter{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);background-color:transparent;width:calc(6 * var(--mb-hem));height:calc(6 * var(--mb-hem));display:none;text-align:center;justify-content:center;align-items:center}#photoBtn svg .primary{fill:var(--mb-photo-icon-primary)}#counter svg .primary:nth-child(1){stroke:var(--mb-photo-icon-primary)}#counter svg .primary:nth-child(2){fill:var(--mb-photo-icon-primary)}#photoBtn svg .accent{stroke:var(--mb-photo-icon-accent)}#counter-number{margin:0;padding:0;font-weight:500;font-size:calc(1.75 * var(--mb-hem));fill:var(--mb-photo-icon-accent)}#counter.show{display:flex}#exchange-link-as-QR img{max-height:calc(15 * var(--mb-hem))}.container.root[max-width~="500px"] .tab label{padding:0 calc(.5 * var(--mb-hem))}.container.root[max-width~="500px"] #copyBtn{position:relative;top:0;left:0;margin:calc(.9 * var(--mb-hem)) auto;display:block}.container.root[max-width~="600px"] .resultTable .row{flex-direction:column;max-width:100%}.container.root[max-width~="600px"] .resultTable .row .content{max-width:100%}.container.root[max-width~="600px"] .resultTable .row.heading{flex-direction:row}.container.root[min-width~="720px"] .resultTable .row .label{flex-basis:35%}.container.root[max-width~="630px"] .resultTable .row .label{flex-basis:calc(10.5 * var(--mb-hem))}.container.root[max-width~="600px"] .resultTable .row .label{flex-basis:auto;margin-bottom:calc(.2 * var(--mb-hem))}@media only screen and (orientation:portrait){.confirm-image .image-container img,.container.image img{width:auto;height:100%}}.lds-ring{display:inline-block;position:relative;width:calc(5 * var(--mb-hem));height:calc(5 * var(--mb-hem))}.lds-ring div{box-sizing:border-box;display:block;position:absolute;width:calc(5 * var(--mb-hem));height:calc(5 * var(--mb-hem));border-width:var(--mb-spinner-border-width);border-style:solid;border-radius:50%;animation:lds-ring 1.2s cubic-bezier(.5,0,.5,1) infinite;border-color:var(--mb-loader-font-color) transparent transparent transparent}.lds-ring div:nth-child(1){animation-delay:-.45s}.lds-ring div:nth-child(2){animation-delay:-.3s}.lds-ring div:nth-child(3){animation-delay:-.15s}@keyframes lds-ring{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}#cameraLocalBtn{display:block}.confirm-image .image-container{width:100%;height:calc(100% - 3.3 * var(--mb-hem));background-color:var(--mb-widget-background-color);position:absolute;bottom:calc(3.3 * var(--mb-hem))}.confirm-image .button-container{position:absolute;bottom:0;box-sizing:border-box;width:100%;height:calc(3.3 * var(--mb-hem));background-color:var(--mb-widget-background-color);display:flex;justify-content:center;border-top:1px solid var(--mb-btn-container-border-color)}.confirm-image .button-container button{margin:calc(.5 * var(--mb-hem))}#webcamConfirmBtn{background-color:var(--mb-btn-background-color);color:var(--mb-btn-font-color)}#webcamRetakeBtn{background-color:var(--mb-btn-alt-background-color);color:var(--mb-btn-alt-font-color)}</style> <div class="container root"> <div class="tab-container"> <div class="tab" id="introTab"> <label> <svg fill="none" viewBox="0 0 20 16" width="100%" xmlns="http://www.w3.org/2000/svg"> <path d="m8 16 1.41-1.41-5.58-5.59h15.67v-2h-15.67l5.59-5.58-1.42-1.4200005-8.00000035 8.0000005z"/> </svg> <slot name="tabs.back">Back</slot> </label> </div> <div class="tab active" id="resultsTab"><label><slot name="tabs.results">Results</slot></label></div> <div class="tab" id="jsonTab"><label><slot name="tabs.json">JSON</slot></label></div> </div> <div class="container main"> <div class="container intro dropzone active"> <div class="flex-vertical"> <p class="intro-label"><slot name="labels.chooseInputMethod">Choose input method</slot></p> <div class="flex-horizontal"> <button type="button" class="intro-button" id="cameraRemoteBtn"> <div class="circle"> <svg width="100%" viewBox="0 0 70 70" fill="none" stroke="black" xmlns="http://www.w3.org/2000/svg"> <path d="M26.2846 16.102C27.6413 16.102 28.7411 15.0022 28.7411 13.6454C28.7411 12.2887 27.6413 11.1889 26.2846 11.1889C24.9279 11.1889 23.828 12.2887 23.828 13.6454C23.828 15.0022 24.9279 16.102 26.2846 16.102Z" stroke-miterlimit="10"/> <path d="M49.6121 47.818V44.6646" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/> <path d="M49.6121 53.602V47.8181" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/> <path d="M20 42.4956V55.7155C20 59.1861 22.8139 62 26.2845 62" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/> <path d="M39.6642 7H26.2845C22.8139 7 20 9.8139 20 13.2845V25.0537" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/> <path d="M49.6123 44.6646V13.3946C49.6123 9.92394 46.7984 7.11005 43.3278 7.11005H41.8889" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/> <path d="M28.611 62H43.3277C46.7983 62 49.6122 59.1861 49.6122 55.7155" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/> <path d="M32.2887 15.0134C33.0441 15.0134 33.6566 14.401 33.6566 13.6455C33.6566 12.89 33.0441 12.2776 32.2887 12.2776C31.5332 12.2776 30.9208 12.89 30.9208 13.6455C30.9208 14.401 31.5332 15.0134 32.2887 15.0134Z" stroke-miterlimit="10"/> </svg> </div> <p><slot name="buttons.cameraRemote">Use mobile camera</slot></p> </button> <input type="file" accept="image/png,image/gif,image/bmp,image/jpeg,image/x-png,image/vnd.wap.wbmp" id="file"> <button type="button" class="intro-button" id="fileBtn"> <div class="circle"> <svg width="100%" viewBox="0 0 70 70" fill="none" stroke="black" xmlns="http://www.w3.org/2000/svg"> <path d="M34.3388 13.3654V42.6923" stroke-linecap="round" stroke-linejoin="round"/> <path d="M43.1777 18.8388L35.7531 11.4142C34.972 10.6332 33.7057 10.6332 32.9246 11.4142L25.5 18.8388" stroke-linecap="round" stroke-linejoin="round"/> <path d="M38.2404 59.9999H49.0577" stroke-linecap="round" stroke-linejoin="round"/> <path d="M13 52.3077V57C13 58.6568 14.3431 60 16 60H35.1154" stroke-linecap="round" stroke-linejoin="round"/> <path d="M56.2692 52.3076V56.9999C56.2692 58.6568 54.9261 59.9999 53.2692 59.9999H49.5385" stroke-linecap="round" stroke-linejoin="round"/> <path d="M18.7692 55.673H49.5385" stroke-linecap="round" stroke-linejoin="round"/> </svg> </div> <p class="browseLabel"><slot name="buttons.browseDesktop">Upload image</slot></p> <p class="browseLabel hidden"><slot name="buttons.browseMobile">Take or upload photo</slot></p> </button> <button type="button" class="intro-button" id="cameraLocalBtn"> <div class="circle"> <svg width="100%" viewBox="0 0 70 70" fill="none" stroke="black" xmlns="http://www.w3.org/2000/svg"> <path d="M35.7171 14.7725C36.4106 14.7725 36.9728 14.2104 36.9728 13.5169C36.9728 12.8234 36.4106 12.2612 35.7171 12.2612C35.0237 12.2612 34.4615 12.8234 34.4615 13.5169C34.4615 14.2104 35.0237 14.7725 35.7171 14.7725Z" stroke-linecap="round" stroke-linejoin="round"/> <path d="M12.9204 33.9312V16.3388C12.9204 12.843 15.7739 10 19.2829 10H48.013" stroke-linecap="round" stroke-linejoin="round"/> <path d="M13.2887 46.0429H58.3318C58.5345 46.0429 58.6977 45.8797 58.6977 45.6744V16.4415C58.6977 12.9457 55.8442 10.1027 52.3352 10.1027" stroke-linecap="round" stroke-linejoin="round"/> <path d="M10.1772 50.0759H18.5983C18.801 50.0759 18.9668 50.2391 18.9668 50.4445V51.4948" stroke-linecap="round" stroke-linejoin="round"/> <path d="M21.0305 50.0758H26.3822" stroke-linecap="round" stroke-linejoin="round"/> <path d="M28.8171 50.0758H34.1688C34.3715 50.0758 34.5373 50.239 34.5373 50.4443V51.4947" stroke-linecap="round" stroke-linejoin="round"/> <path d="M36.6039 50.0758H41.9556" stroke-linecap="round" stroke-linejoin="round"/> <path d="M44.3907 50.0758H49.7423" stroke-linecap="round" stroke-linejoin="round"/> <path d="M8.01323 54.4904H18.5981C18.8008 54.4904 18.9667 54.6536 18.9667 54.8589V55.9092" stroke-linecap="round" stroke-linejoin="round"/> <path d="M21.0303 54.4904H26.382" stroke-linecap="round" stroke-linejoin="round"/> <path d="M45.7514 60H15.9209" stroke-linecap="round" stroke-linejoin="round"/> <path d="M29.1411 54.4904H41.9556" stroke-linecap="round" stroke-linejoin="round"/> <path d="M44.3905 54.4904H49.7422" stroke-linecap="round" stroke-linejoin="round"/> <path d="M52.156 54.4904H57.5077" stroke-linecap="round" stroke-linejoin="round"/> <path d="M52.1773 50.0758H57.529C57.7317 50.0758 57.8975 50.239 57.8975 50.4443V51.4947" stroke-linecap="round" stroke-linejoin="round"/> <path d="M48.7524 60H64.2257C64.3468 60 64.46 59.9395 64.5337 59.8368C64.6021 59.7368 64.6153 59.6104 64.5732 59.4972L61.0642 50.3101" stroke-linecap="round" stroke-linejoin="round"/> <path d="M14.0124 14.6462H27.543" stroke-linecap="round" stroke-linejoin="round"/> <path d="M13.2438 60H6.368C6.24954 60 6.13634 59.9421 6.0679 59.8447C5.99946 59.7473 5.98103 59.6236 6.02052 59.5104L7.66314 54.7378C7.72895 54.5457 7.93954 54.443 8.13171 54.5088" stroke-linecap="round" stroke-linejoin="round"/> </svg> </div> <p class="cameraLocalLabel"><slot name="buttons.cameraLocalDesktop">Use web camera</slot></p> <p class="cameraLocalLabel hidden"><slot name="buttons.cameraLocalMobile">In-browser camera</slot></p> </button> </div> </div> <div id="dragMask" class="flex-vertical"> <p class="intro-label" style="opacity:0"><slot name="labels.chooseInputMethod">Choose input method</slot></p> <div class="flex-horizontal"> <button type="button" class="intro-button" id="dropButton"> <div class="circle"> <svg width="100%" viewBox="0 0 70 70" fill="none" stroke="black" xmlns="http://www.w3.org/2000/svg"> <path d="M34.3388 13.3654V42.6923" stroke-linecap="round" stroke-linejoin="round"/> <path d="M43.1777 18.8388L35.7531 11.4142C34.972 10.6332 33.7057 10.6332 32.9246 11.4142L25.5 18.8388" stroke-linecap="round" stroke-linejoin="round"/> <path d="M38.2404 59.9999H49.0577" stroke-linecap="round" stroke-linejoin="round"/> <path d="M13 52.3077V57C13 58.6568 14.3431 60 16 60H35.1154" stroke-linecap="round" stroke-linejoin="round"/> <path d="M56.2692 52.3076V56.9999C56.2692 58.6568 54.9261 59.9999 53.2692 59.9999H49.5385" stroke-linecap="round" stroke-linejoin="round"/> <path d="M18.7692 55.673H49.5385" stroke-linecap="round" stroke-linejoin="round"/> </svg> </div> <p><slot name="buttons.dropFiles">Drop files to upload</slot></p> </button> </div> </div> </div> <div class="container results"></div> <div class="container json"> <button id="copyBtn"><slot name="buttons.copy">Copy to clipboard</slot></button> <div></div> </div> </div> <div class="container remote-camera hidden"> <h2 id="generating-exchange-link"><slot name="labels.generatingExchangeLink">Generating exchange link...</slot></h2> <h2 id="exchange-link-title"><slot name="labels.exchangeLinkTitle">Exchange link is</slot></h2> <button type="button" id="cancelBtnRemoteCamera"> <slot name="cancel-btn-remote-camera"> <svg width="100%" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg"> <g filter="url(#filter0_dd)"> <path fill-rule="evenodd" clip-rule="evenodd" d="M16.0004 13.8786L24.2731 5.60596L26.3944 7.72728L18.1218 16L26.3944 24.2726L24.2731 26.3939L16.0004 18.1213L7.72777 26.3939L5.60645 24.2726L13.8791 16L5.60645 7.72728L7.72777 5.60596L16.0004 13.8786Z" fill="white"/> </g> <defs> <filter id="filter0_dd" x="1.60645" y="1.60596" width="28.788" height="28.788" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB"> <feFlood flood-opacity="0" result="BackgroundImageFix"/> <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"/> <feOffset/> <feGaussianBlur stdDeviation="2"/> <feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"/> <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow"/> <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"/> <feOffset dy="1"/> <feGaussianBlur stdDeviation="1"/> <feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"/> <feBlend mode="normal" in2="effect1_dropShadow" result="effect2_dropShadow"/> <feBlend mode="normal" in="SourceGraphic" in2="effect2_dropShadow" result="shape"/> </filter> </defs> </svg> </slot> </button> <div class="loader-img"> <slot name="loader-image"> <div class="lds-ring"><div></div><div></div><div></div><div></div></div> </slot> </div> <div id="exchange-link"></div> <div id="exchange-link-as-QR"></div> <p id="exchange-link-notes"><slot name="labels.openLinkAtSmartphone">Please open exchange link at the smartphone</slot></p> <p id="exchange-link-remote-camera-is-pending"><slot name="labels.remoteCameraIsPending">Remote camera is pending...</slot></p> <p id="exchange-link-remote-camera-is-open"><slot name="labels.remoteCameraIsOpen">Remote camera is open...</slot></p> <p id="exchange-link-image-is-uploading"><slot name="labels.imageIsUploading">Image is uploading...</slot></p> <p id="exchange-link-image-is-processing"><slot name="labels.imageIsProcessing">Image is processing...</slot></p> <div id="exchange-link-with"> \x3c!-- TODO: add send link with email, SMS and copy to clipboard --\x3e </div> </div> <div class="container video hidden"> <video class="flipped" id="video" muted playsinline><slot name="labels.videoTagUnsupported">Your browser does not support video tag</slot></video> <div id="cardPlacer"> <div class="corner corner-top corner-left"></div> <div class="corner corner-top corner-right"></div> <div class="corner corner-bottom corner-left"></div> <div class="corner corner-bottom corner-right"></div> </div> <button type="button" id="photoBtn"> <svg width="100%" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg"> <g opacity="0.85"> <circle class="primary" cx="50" cy="50" r="50" fill="white"/> <g opacity="0.8"> <circle class="accent" cx="50" cy="50" r="28" stroke="#48B2E8" stroke-width="2"/> <circle class="accent" cx="50" cy="50" r="22" stroke="#48B2E8" stroke-width="2"/> </g> </g> </svg> <p><slot name="buttons.takePhoto">Take a photo</slot></p> </button> <button type="button" id="flipBtn" class="flipped"> <svg width="100%" viewBox="0 0 44 35" fill="none" xmlns="http://www.w3.org/2000/svg"> <path d="M22 7V35" stroke-width="1.38744" stroke-miterlimit="3.8637" stroke-dasharray="1.39 2.77"/> <path d="M38.8375 11.5471L27.2239 20.9999L38.8375 30.4527L38.8375 11.5471Z" stroke-width="1.38744"/> <path class="fill" d="M5.16247 11.5471L16.7761 20.9999L5.16247 30.4527L5.16247 11.5471Z" stroke-width="1.38744"/> <path class="fill" d="M21.4447 1.75C23.851 1.75 26.2572 2.975 28.1082 5.075L26.0721 7H31.625V1.75L29.4038 3.85C27.1827 1.4 24.4063 0 21.4447 0C17.9279 0 14.7812 1.75 12.375 5.075L13.8558 6.125C15.8918 3.325 18.4832 1.75 21.4447 1.75Z"/> </svg> </button> <button type="button" id="cancelBtnLocalCamera"> <svg width="100%" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg"> <g filter="url(#filter1_dd)"> <path fill-rule="evenodd" clip-rule="evenodd" d="M16.0004 13.8786L24.2731 5.60596L26.3944 7.72728L18.1218 16L26.3944 24.2726L24.2731 26.3939L16.0004 18.1213L7.72777 26.3939L5.60645 24.2726L13.8791 16L5.60645 7.72728L7.72777 5.60596L16.0004 13.8786Z" fill="white"/> </g> <defs> <filter id="filter1_dd" x="1.60645" y="1.60596" width="28.788" height="28.788" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB"> <feFlood flood-opacity="0" result="BackgroundImageFix"/> <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"/> <feOffset/> <feGaussianBlur stdDeviation="2"/> <feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"/> <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow"/> <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"/> <feOffset dy="1"/> <feGaussianBlur stdDeviation="1"/> <feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"/> <feBlend mode="normal" in2="effect1_dropShadow" result="effect2_dropShadow"/> <feBlend mode="normal" in="SourceGraphic" in2="effect2_dropShadow" result="shape"/> </filter> </defs> </svg> </button> <div id="counter"> <svg width="100%" viewBox="0 0 120 120" fill="none" xmlns="http://www.w3.org/2000/svg"> <circle class="primary" opacity="0.2" cx="60" cy="60" r="59" stroke="white" stroke-width="2"/> <circle class="primary" opacity="0.8" cx="60" cy="60" r="50" fill="white"/> <text id="counter-number" class="accent" x="50%" y="50%" fill="#48B2E8" text-anchor="middle" dy=".3em"></text> </svg> </div> </div> <div class="pending-container"> <div class="loader-img"> <slot name="loader-image"> <div class="lds-ring"><div></div><div></div><div></div><div></div></div> </slot> </div> <h2><slot name="labels.uploading">Uploading</slot>&nbsp;<span class="progress-bar-value"></span></h2> <h2><slot name="labels.processing">Processing</slot></h2> <h2><slot name="labels.analyzing">Analyzing</slot></h2> <h2><slot name="labels.extracting">Extracting data</slot></h2> <h2><slot name="labels.almostDone">Almost done</slot></h2> </div> <div class="error-container dialog"></div> <div class="permission dialog"> <div class="title"><slot name="labels.permissionMsg">Enable camera please</slot></div> </div> <div class="confirm-image"> <button type="button" id="cancelBtnConfirmImage"> <svg width="100%" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg"> <g filter="url(#filter2_dd)"> <path fill-rule="evenodd" clip-rule="evenodd" d="M16.0004 13.8786L24.2731 5.60596L26.3944 7.72728L18.1218 16L26.3944 24.2726L24.2731 26.3939L16.0004 18.1213L7.72777 26.3939L5.60645 24.2726L13.8791 16L5.60645 7.72728L7.72777 5.60596L16.0004 13.8786Z" fill="white"/> </g> <defs> <filter id="filter2_dd" x="1.60645" y="1.60596" width="28.788" height="28.788" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB"> <feFlood flood-opacity="0" result="BackgroundImageFix"/> <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"/> <feOffset/> <feGaussianBlur stdDeviation="2"/> <feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"/> <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow"/> <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"/> <feOffset dy="1"/> <feGaussianBlur stdDeviation="1"/> <feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"/> <feBlend mode="normal" in2="effect1_dropShadow" result="effect2_dropShadow"/> <feBlend mode="normal" in="SourceGraphic" in2="effect2_dropShadow" result="shape"/> </filter> </defs> </svg> </button> <div class="image-container"></div> <div class="button-container"> <button type="button" id="webcamRetakeBtn"><slot name="buttons.retake">RETAKE</slot></button> <button type="button" id="webcamConfirmBtn"><slot name="buttons.confirm">USE PHOTO</slot></button> </div> </div> <div style="display:none"> <slot name="buttons.tryAgain">TRY AGAIN</slot> <slot name="labels.errorMsg">We\'re sorry, but something went wrong. Please try again.</slot> <slot name="labels.notFoundErrorMsg">No camera was found on your device.</slot> <slot name="labels.notAllowedErrorMsg">You have denied camera access permission.</slot> <slot name="labels.cameraNotAvailableErrorMsg">Camera is not available at this moment.</slot> <slot name="labels.cameraInUseErrorMsg">Camera is already in use.</slot> <slot name="labels.scanningFinishedNoDataTitle">Document not recognized.</slot> <slot name="labels.scanningFinishedNoDataMessage">Please try again with a supported document or select a different document type.</slot> <slot name="labels.unsupportedFileType">Unsupported file type.</slot> <slot name="labels.selectDocumentType">Please select one or more document types to start scanning.</slot> <slot name="labels.noDocumentType">No document type selected.</slot> <slot name="labels.webRtcUnsupported">WebRTC not supported by your browser.</slot> <slot name="labels.fileSizeLimitExceeded">Maximum file size is 15 MB.</slot> </div> </div> ',Me=function(){if("undefined"==typeof window)return null;var e=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(e){return window.setTimeout(e,20)};function t(e,t){var r=Object.prototype.toString.call(e),n="[object Array]"===r||"[object NodeList]"===r||"[object HTMLCollection]"===r||"[object Object]"===r||"undefined"!=typeof jQuery&&e instanceof jQuery||"undefined"!=typeof Elements&&e instanceof Elements,o=0,i=e.length;if(n)for(;o<i;o++)t(e[o]);else t(e)}function r(e){if(!e.getBoundingClientRect)return{width:e.offsetWidth,height:e.offsetHeight};var t=e.getBoundingClientRect();return{width:Math.round(t.width),height:Math.round(t.height)}}var n=function(o,i){function a(){var e,t,r=[];this.add=function(e){r.push(e)},this.call=function(n){for(e=0,t=r.length;e<t;e++)r[e].call(this,n)},this.remove=function(n){var o=[];for(e=0,t=r.length;e<t;e++)r[e]!==n&&o.push(r[e]);r=o},this.length=function(){return r.length}}function s(t,n){if(t)if(t.resizedAttached)t.resizedAttached.add(n);else{t.resizedAttached=new a,t.resizedAttached.add(n),t.resizeSensor=document.createElement("div"),t.resizeSensor.dir="ltr",t.resizeSensor.className="resize-sensor";var o="position: absolute; left: -10px; top: -10px; right: 0; bottom: 0; overflow: hidden; z-index: -1; visibility: hidden; max-width: 100%",i="position: absolute; left: 0; top: 0; transition: 0s;";t.resizeSensor.style.cssText=o,t.resizeSensor.innerHTML='<div class="resize-sensor-expand" style="'+o+'"><div style="'+i+'"></div></div><div class="resize-sensor-shrink" style="'+o+'"><div style="'+i+' width: 200%; height: 200%"></div></div>',t.appendChild(t.resizeSensor);var s=window.getComputedStyle(t),l=s?s.getPropertyValue("position"):null;"absolute"!==l&&"relative"!==l&&"fixed"!==l&&(t.style.position="relative");var c,u,d=t.resizeSensor.childNodes[0],h=d.childNodes[0],m=t.resizeSensor.childNodes[1],p=r(t),g=p.width,f=p.height,b=!0,v=0,y=function(){if(b){if(0===t.offsetWidth&&0===t.offsetHeight)return void(v||(v=e(function(){v=0,y()})));b=!1}h.style.width="100000px",h.style.height="100000px",d.scrollLeft=1e5,d.scrollTop=1e5,m.scrollLeft=1e5,m.scrollTop=1e5};t.resizeSensor.resetSensor=y;var w=function(){u=0,c&&(g=p.width,f=p.height,t.resizedAttached&&t.resizedAttached.call(p))},A=function(){p=r(t),(c=p.width!==g||p.height!==f)&&!u&&(u=e(w)),y()},S=function(e,t,r){e.attachEvent?e.attachEvent("on"+t,r):e.addEventListener(t,r)};S(d,"scroll",A),S(m,"scroll",A),e(y)}}t(o,function(e){s(e,i)}),this.detach=function(e){n.detach(o,e)},this.reset=function(){o.resizeSensor.resetSensor()}};return n.reset=function(e,r){t(e,function(e){e.resizeSensor.resetSensor()})},n.detach=function(e,r){t(e,function(e){e&&(e.resizedAttached&&"function"==typeof r&&(e.resizedAttached.remove(r),e.resizedAttached.length())||e.resizeSensor&&(e.contains(e.resizeSensor)&&e.removeChild(e.resizeSensor),delete e.resizeSensor,delete e.resizedAttached))})},n}();
/**
     * @license
     *
     * Copyright (c) 2013 Marc J. Schmidt

     Permission is hereby granted, free of charge, to any person obtaining a copy
     of this software and associated documentation files (the "Software"), to deal
     in the Software without restriction, including without limitation the rights
     to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
     copies of the Software, and to permit persons to whom the Software is
     furnished to do so, subject to the following conditions:

     The above copyright notice and this permission notice shall be included in
     all copies or substantial portions of the Software.

     THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
     IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
     FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
     AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
     LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
     OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
     THE SOFTWARE.
     * */
function _e(e,t){var r=function(){var r,n={},o=[];function i(e){e||(e=document.documentElement);var t=window.getComputedStyle(e,null).fontSize;return parseFloat(t)||16}function a(e,t){var r=t.split(/\d/),n=r[r.length-1];switch(t=parseFloat(t),n){case"px":return t;case"em":return t*i(e);case"rem":return t*i();case"vw":return t*document.documentElement.clientWidth/100;case"vh":return t*document.documentElement.clientHeight/100;case"vmin":case"vmax":var o=document.documentElement.clientWidth/100,a=document.documentElement.clientHeight/100;return t*(0,Math["vmin"===n?"min":"max"])(o,a);default:return t}}function s(e,t){var r,o,i,s,l,c,u,d;this.element=e;var h=["min-width","min-height","max-width","max-height"];this.call=function(){for(r in i=function(e){if(!e.getBoundingClientRect)return{width:e.offsetWidth,height:e.offsetHeight};var t=e.getBoundingClientRect();return{width:Math.round(t.width),height:Math.round(t.height)}}(this.element),c={},n[t])n[t].hasOwnProperty(r)&&(o=n[t][r],s=a(this.element,o.value),l="width"===o.property?i.width:i.height,d=o.mode+"-"+o.property,u="","min"===o.mode&&l>=s&&(u+=o.value),"max"===o.mode&&l<=s&&(u+=o.value),c[d]||(c[d]=""),u&&-1===(" "+c[d]+" ").indexOf(" "+u+" ")&&(c[d]+=" "+u));for(var e in h)h.hasOwnProperty(e)&&(c[h[e]]?this.element.setAttribute(h[e],c[h[e]].substr(1)):this.element.removeAttribute(h[e]))}}function l(t,r){t.elementQueriesSetupInformation||(t.elementQueriesSetupInformation=new s(t,r)),t.elementQueriesSensor||(t.elementQueriesSensor=new e(t,function(){t.elementQueriesSetupInformation.call()})),t.elementQueriesSetupInformation.call()}function c(e,t,i,a){if(void 0===n[e]){n[e]=[];var s=o.length;r.innerHTML+="\n"+e+" {animation: 0.1s element-queries;}",r.innerHTML+="\n"+e+" > .resize-sensor {min-width: "+s+"px;}",o.push(e)}n[e].push({mode:t,property:i,value:a})}function u(e){var r;if(document.querySelectorAll&&(r=e?e.querySelectorAll.bind(e):t?t.querySelectorAll.bind(t):document.querySelectorAll.bind(document)),r||"undefined"==typeof $$||(r=$$),r||"undefined"==typeof jQuery||(r=jQuery),!r)throw"No document.querySelectorAll, jQuery or Mootools's $$ found.";return r}function d(t){var r=[],n=[],o=[],i=0,a=-1,s=[];for(var l in t.children)if(t.children.hasOwnProperty(l)&&t.children[l].tagName&&"img"===t.children[l].tagName.toLowerCase()){r.push(t.children[l]);var c=t.children[l].getAttribute("min-width")||t.children[l].getAttribute("data-min-width"),u=t.children[l].getAttribute("data-src")||t.children[l].getAttribute("url");o.push(u);var d={minWidth:c};n.push(d),c?t.children[l].style.display="none":(i=r.length-1,t.children[l].style.display="block")}function h(){var e,l=!1;for(e in r)r.hasOwnProperty(e)&&n[e].minWidth&&t.offsetWidth>n[e].minWidth&&(l=e);if(l||(l=i),a!==l)if(s[l])r[a].style.display="none",r[l].style.display="block",a=l;else{var c=new Image;c.onload=function(){r[l].src=o[l],r[a].style.display="none",r[l].style.display="block",s[l]=!0,a=l},c.src=o[l]}else r[l].src=o[l]}a=i,t.resizeSensorInstance=new e(t,h),h()}var h=/,?[\s\t]*([^,\n]*?)((?:\[[\s\t]*?(?:min|max)-(?:width|height)[\s\t]*?[~$\^]?=[\s\t]*?"[^"]*?"[\s\t]*?])+)([^,\n\s\{]*)/gim,m=/\[[\s\t]*?(min|max)-(width|height)[\s\t]*?[~$\^]?=[\s\t]*?"([^"]*?)"[\s\t]*?]/gim;function p(e){var t,r,n,o;for(e=e.replace(/'/g,'"');null!==(t=h.exec(e));)for(r=t[1]+t[3],n=t[2];null!==(o=m.exec(n));)c(r,o[1],o[2],o[3])}function g(e){var t="";if(e)if("string"==typeof e)-1===(e=e.toLowerCase()).indexOf("min-width")&&-1===e.indexOf("max-width")||p(e);else for(var r=0,n=e.length;r<n;r++)1===e[r].type?-1!==(t=e[r].selectorText||e[r].cssText).indexOf("min-height")||-1!==t.indexOf("max-height")?p(t):-1===t.indexOf("min-width")&&-1===t.indexOf("max-width")||p(t):4===e[r].type?g(e[r].cssRules||e[r].rules):3===e[r].type&&e[r].styleSheet.hasOwnProperty("cssRules")&&g(e[r].styleSheet.cssRules)}var f=!1;this.init=function(){var n="animationstart";void 0!==document.documentElement.style.webkitAnimationName?n="webkitAnimationStart":void 0!==document.documentElement.style.MozAnimationName?n="mozanimationstart":void 0!==document.documentElement.style.OAnimationName&&(n="oanimationstart");var i=t||document.body;if(i.addEventListener(n,function(t){var r=t.target,n=r&&window.getComputedStyle(r,null),i=n&&n.getPropertyValue("animation-name");if(i&&-1!==i.indexOf("element-queries")){r.elementQueriesSensor=new e(r,function(){r.elementQueriesSetupInformation&&r.elementQueriesSetupInformation.call()});var a=window.getComputedStyle(r.resizeSensor,null).getPropertyValue("min-width");a=parseInt(a.replace("px","")),l(t.target,o[a])}}),i=t||document,!f){(r=document.createElement("style")).type="text/css",r.innerHTML="[responsive-image] > img, [data-responsive-image] {overflow: hidden; padding: 0; } [responsive-image] > img, [data-responsive-image] > img {width: 100%;}",r.innerHTML+="\n@keyframes element-queries { 0% { visibility: inherit; } }",t?t.appendChild(r):document.getElementsByTagName("head")[0].appendChild(r),i.styleSheets||(Array.prototype.forEach.call(i.querySelectorAll("style"),(e,t)=>{let r=document.createElement("style");r.id="elemQueryStyleFix"+t,r.innerHTML=e.innerHTML,document.head.appendChild(r)}),i=document);for(var a=0,s=i.styleSheets.length;a<s;a++)try{i.styleSheets[a].href&&0===i.styleSheets[a].href.indexOf("file://")&&console.log("CssElementQueries: unable to parse local css files, "+i.styleSheets[a].href),g(i.styleSheets[a].cssRules||i.styleSheets[a].rules||i.styleSheets[a].cssText)}catch(e){}i.styleSheets||Array.prototype.forEach.call(document.head.querySelectorAll("style"),e=>{e.id&&0===e.id.indexOf("elemQueryStyleFix")&&document.head.removeChild(e)})}f=!0,function(){for(var e=u()("[data-responsive-image],[responsive-image]"),t=0,r=e.length;t<r;t++)d(e[t])}()},this.findElementQueriesElements=function(e){!function(e){var t=u(e);for(var r in n)if(n.hasOwnProperty(r))for(var o=t(r,e),i=0,a=o.length;i<a;i++)l(o[i],r)}(e)},this.update=function(){this.init()}};r.update=function(){r.instance.update()},r.detach=function(e){e.elementQueriesSetupInformation?(e.elementQueriesSensor.detach(),delete e.elementQueriesSetupInformation,delete e.elementQueriesSensor):e.resizeSensorInstance&&(e.resizeSensorInstance.detach(),delete e.resizeSensorInstance)},r.init=function(){r.instance||(r.instance=new r),r.instance.init()};return r.findElementQueriesElements=function(e){r.instance.findElementQueriesElements(e)},r.listen=function(){!function(e){if(/loaded|complete/i.test(document.readyState))e();else if(document.addEventListener)document.addEventListener("DOMContentLoaded",e,!1);else if(/KHTML|WebKit|iCab/i.test(navigator.userAgent))var t=setInterval(function(){/loaded|complete/i.test(document.readyState)&&(e(),clearInterval(t))},10);else window.onload=e}(r.init)},r}var ze=l(function(e){var t,r,n,o,i;t="undefined"!=typeof window&&void 0!==window.document?window.document:{},r=e.exports,n=function(){for(var e,r=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],n=0,o=r.length,i={};n<o;n++)if((e=r[n])&&e[1]in t){for(n=0;n<e.length;n++)i[r[0][n]]=e[n];return i}return!1}(),o={change:n.fullscreenchange,error:n.fullscreenerror},i={request:function(e){return new Promise(function(r,o){var i=function(){this.off("change",i),r()}.bind(this);this.on("change",i),e=e||t.documentElement,Promise.resolve(e[n.requestFullscreen]()).catch(o)}.bind(this))},exit:function(){return new Promise(function(e,r){if(this.isFullscreen){var o=function(){this.off("change",o),e()}.bind(this);this.on("change",o),Promise.resolve(t[n.exitFullscreen]()).catch(r)}else e()}.bind(this))},toggle:function(e){return this.isFullscreen?this.exit():this.request(e)},onchange:function(e){this.on("change",e)},onerror:function(e){this.on("error",e)},on:function(e,r){var n=o[e];n&&t.addEventListener(n,r,!1)},off:function(e,r){var n=o[e];n&&t.removeEventListener(n,r,!1)},raw:n},n?(Object.defineProperties(i,{isFullscreen:{get:function(){return Boolean(t[n.fullscreenElement])}},element:{enumerable:!0,get:function(){return t[n.fullscreenElement]}},isEnabled:{enumerable:!0,get:function(){return Boolean(t[n.fullscreenEnabled])}}}),r?e.exports=i:window.screenfull=i):r?e.exports={isEnabled:!1}:window.screenfull={isEnabled:!1}}),Re=(ze.isEnabled,function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var t=document.activeElement,r=[],n=0;n<e.rangeCount;n++)r.push(e.getRangeAt(n));switch(t.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":t.blur();break;default:t=null}return e.removeAllRanges(),function(){"Caret"===e.type&&e.removeAllRanges(),e.rangeCount||r.forEach(function(t){e.addRange(t)}),t&&t.focus()}}),De="Copy to clipboard: #{key}, Enter";var Le,Te,Fe=function(e,t){var r,n,o,i,a,s,l=!1;t||(t={}),r=t.debug||!1;try{if(o=Re(),i=document.createRange(),a=document.getSelection(),(s=document.createElement("span")).textContent=e,s.style.all="unset",s.style.position="fixed",s.style.top=0,s.style.clip="rect(0, 0, 0, 0)",s.style.whiteSpace="pre",s.style.webkitUserSelect="text",s.style.MozUserSelect="text",s.style.msUserSelect="text",s.style.userSelect="text",s.addEventListener("copy",function(r){r.stopPropagation(),t.format&&(r.preventDefault(),r.clipboardData.clearData(),r.clipboardData.setData(t.format,e))}),document.body.appendChild(s),i.selectNodeContents(s),a.addRange(i),!document.execCommand("copy"))throw new Error("copy command was unsuccessful");l=!0}catch(o){r&&console.error("unable to copy using execCommand: ",o),r&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(t.format||"text",e),l=!0}catch(o){r&&console.error("unable to copy using clipboardData: ",o),r&&console.error("falling back to prompt"),n=function(e){var t=(/mac os x/i.test(navigator.userAgent)?"⌘":"Ctrl")+"+C";return e.replace(/#{\s*key\s*}/g,t)}("message"in t?t.message:De),window.prompt(n,e)}}finally{a&&("function"==typeof a.removeRange?a.removeRange(i):a.removeAllRanges()),s&&document.body.removeChild(s),o()}return l};function Oe(e){return"string"==typeof e?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;").replace(/\n/g,"\\n"):e}function Pe(){return/Mobi|Android/.test(navigator.userAgent)}function je(){return/Version\//.test(navigator.userAgent)&&/Safari\//.test(navigator.userAgent)&&!/(Chrome|Chromium)\//.test(navigator.userAgent)}function Ge(){return/Firefox\//.test(navigator.userAgent)&&!/Seamonkey\//.test(navigator.userAgent)}function He(){return function(){try{return firebase.app(),!0}catch(e){return!1}}()}function Ne(e,t){return new RegExp(`(^|\\s)${String(t).trim()}($|\\s)`).test(e.className)}function Ye(e,t){return Ne(e,t)||(e.className+=` ${t}`,e.className=e.className.trim()),e}function qe(e,t){return e.className=e.className.replace(new RegExp(`(\\s|^)${String(t).split(" ").join("|")}(\\s|$)`,"g")," ").trim(),e}function Ue(e,t,r){return!0===r?Ye(e,t):!1===r?qe(e,t):Ne(e,t)?qe(e,t):Ye(e,t)}function Qe(e){if(e)switch(e.charAt(0)){case"/":return"jpg";case"R":return"gif";case"U":return"webp";case"i":default:return"png"}}!function(e){e[e.BackFacingCamera=0]="BackFacingCamera",e[e.FrontFacingCamera=1]="FrontFacingCamera"}(Le||(Le={})),function(e){e.MediaDevicesNotSupported="MediaDevicesNotSupported",e.CameraNotFound="CameraNotFound",e.CameraNotAllowed="CameraNotAllowed",e.CameraInUse="CameraInUse",e.CameraNotAvailable="CameraNotAvailable"}(Te||(Te={}));var $e=function(e){function r(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var o=e.apply(this,r)||this;return o.reason=t,o.name="CameraManagerError",o}return t(r,e),r}(Error);function Ve(e,t){return void 0===t&&(t=Le.BackFacingCamera),r(this,void 0,void 0,function(){var o=this;return n(this,function(i){return[2,new Promise(function(i,a){return r(o,void 0,void 0,function(){var o,s,l,c,u;return n(this,function(d){switch(d.label){case 0:if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)return[3,6];d.label=1;case 1:return d.trys.push([1,4,,5]),[4,function(e){return r(this,void 0,void 0,function(){var t,r,o,i,a,s,l,c,u,d;return n(this,function(n){switch(n.label){case 0:return t=[],r=[],[4,navigator.mediaDevices.enumerateDevices()];case 1:return(o=n.sent()).filter(function(e){return"videoinput"===e.kind}).every(function(e){return""===e.label})?[4,navigator.mediaDevices.getUserMedia({video:{facingMode:{ideal:"environment"}},audio:!1})]:[3,4];case 2:return i=n.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 3:o=n.sent(),i.getTracks().forEach(function(e){return e.stop()}),n.label=4;case 4:for(s in a=o.filter(function(e){return"videoinput"===e.kind}))Ke((l=a[s]).label)?r.push(l):t.push(l);return t.length>0||r.length>0?(c=r.length>0?r:t,e===Le.BackFacingCamera&&r.length>0&&(c=r),e===Le.FrontFacingCamera&&t.length>0&&(c=t),c=c.sort(function(e,t){return e.label.localeCompare(t.label)}),u=0,(d=c.map(function(e){var t=e.label.match(/\b([0-9]+)MP?\b/i);return null!==t?parseInt(t[1],10):NaN})).some(function(e){return isNaN(e)})||(u=d.lastIndexOf(Math.max.apply(Math,d))),[2,c[u]]):[2,null]}})})}(t)];case 2:return null===(o=d.sent())?(a(new $e(Te.CameraNotFound)),[2]):(s={audio:!1,video:{width:{min:640,ideal:1920,max:1920},height:{min:480,ideal:1080,max:1080}}},""===o.deviceId?s.video.facingMode={ideal:t===Le.BackFacingCamera?"environment":"user"}:s.video.deviceId={exact:o.deviceId},[4,navigator.mediaDevices.getUserMedia(s)]);case 3:return l=d.sent(),e.controls=!1,e.srcObject=l,i(e),[3,5];case 4:switch(c=d.sent(),u=Te.CameraInUse,c.name){case"NotFoundError":case"OverconstrainedError":u=Te.CameraNotFound;break;case"NotAllowedError":case"SecurityError":u=Te.CameraNotAllowed;break;case"AbortError":case"NotReadableError":u=Te.CameraNotAvailable;break;case"TypeError":throw c}return a(new $e(u,c.message)),[3,5];case 5:return[3,7];case 6:a(new $e(Te.MediaDevicesNotSupported)),d.label=7;case 7:return[2]}})})})]})})}var We=["rear","back","rück","arrière","trasera","trás","traseira","posteriore","后面","後面","背面","后置","後置","背置","задней","الخلفية","후","arka","achterzijde","หลัง","baksidan","bagside","sau","bak","tylny","takakamera","belakang","אחורית","πίσω","spate","hátsó","zadní","darrere","zadná","задня","stražnja","belakang","बैक"];function Ke(e){var t=e.toLowerCase();return We.some(function(e){return t.includes(e)})}const Je={SDK:me};window&&(window.Microblink=Je);let Xe=document.createElement("script");function Ze(){let e=document.createElement("template");e.innerHTML=Ce,window.ShadyCSS&&ShadyCSS.prepareTemplate(e,"microblink-ui-web");customElements.define("microblink-ui-web",class extends HTMLElement{static get observedAttributes(){return["tabs","autoscroll","webcam","fullscreen","upload"]}get tabs(){return this.hasAttribute("tabs")}set tabs(e){!0===e?this.setAttribute("tabs",""):this.removeAttribute("tabs")}get autoscroll(){return this.hasAttribute("autoscroll")}set autoscroll(e){!0===e?this.setAttribute("autoscroll",""):this.removeAttribute("autoscroll")}get webcam(){return"off"!==this.getAttribute("webcam")}set webcam(e){!1===e?this.setAttribute("webcam","off"):this.removeAttribute("webcam")}get upload(){return"off"!==this.getAttribute("upload")}set upload(e){!1===e?this.setAttribute("upload","off"):this.removeAttribute("upload")}get fullscreen(){return"off"!==this.getAttribute("fullscreen")}set fullscreen(e){!1===e?this.setAttribute("fullscreen","false"):this.removeAttribute("fullscreen")}constructor(){super(),this.attachShadow({mode:"open"}),this.onScanError=this.onScanError.bind(this),this.onScanSuccess=this.onScanSuccess.bind(this),this.onScanProgress=this.onScanProgress.bind(this),this.startRecording=this.startRecording.bind(this),this.autoScrollListener=this.autoScrollListener.bind(this),this.getLocalization=this.getLocalization.bind(this),this.currentScanSecretKey=null,this.unsubscribeFromScanExchangerChanges=null,this.executionResult=null,Je.SDK.RegisterListener(this)}connectedCallback(){this.shadowRoot||this.attachShadow({mode:"open"}),this.shadowRoot.innerHTML&&(this.shadowRoot.innerHTML=""),this.shadowRoot.appendChild(e.content.cloneNode(!0)),this.getLocalization(),this.shadowRoot.getElementById("fileBtn").addEventListener("click",()=>this.shadowRoot.getElementById("file").click()),this.shadowRoot.getElementById("file").addEventListener("click",function(){this.value=""}),this.shadowRoot.getElementById("file").addEventListener("touchstart",function(){this.value=""}),this.shadowRoot.getElementById("file").addEventListener("change",this.fileChosen.bind(this)),this.shadowRoot.getElementById("cancelBtnLocalCamera").addEventListener("click",()=>{this.clearTimers(),this.stopCamera()}),this.shadowRoot.getElementById("cancelBtnRemoteCamera").addEventListener("click",()=>{this.stopCamera()}),this.shadowRoot.querySelector(".dropzone").addEventListener("dragover",e=>e.preventDefault()),this.shadowRoot.querySelector(".dropzone").addEventListener("drop",this.onDrop.bind(this)),this.shadowRoot.querySelector(".dropzone").addEventListener("dragenter",this.onDragEnter.bind(this)),this.shadowRoot.querySelector(".dropzone").addEventListener("dragleave",this.onDragLeave.bind(this)),this.shadowRoot.getElementById("cameraLocalBtn").addEventListener("click",()=>{Ge()?this.openFullscreen().finally(()=>this.activateLocalCamera()):je()?(this.cameraPermitted&&this.openFullscreen(),this.activateLocalCamera()):(this.openFullscreen(),this.activateLocalCamera())}),this.shadowRoot.getElementById("cameraRemoteBtn").addEventListener("click",this.activateRemoteCamera.bind(this)),this.shadowRoot.querySelector("video").addEventListener("loadedmetadata",function(){this.play(),this.controls=!1}),this.shadowRoot.querySelector("video").addEventListener("play",()=>{qe(this.shadowRoot.getElementById("photoBtn"),"hidden"),qe(this.shadowRoot.getElementById("cardPlacer"),"hidden")}),this.shadowRoot.getElementById("photoBtn").addEventListener("click",()=>this.startRecording()),this.shadowRoot.getElementById("flipBtn").addEventListener("click",this.flipCamera.bind(this)),Array.prototype.forEach.call(this.shadowRoot.querySelectorAll(".tab"),e=>{e.addEventListener("click",()=>{let t=e.id;"introTab"===t&&this.toggleTabs(!1),Array.prototype.forEach.call(this.shadowRoot.querySelectorAll(".tab"),e=>Ue(e,"active",t===e.id)),Array.prototype.forEach.call(this.shadowRoot.querySelectorAll(".main > .container"),e=>{Ue(e,"active",Ne(e,t.substring(0,t.length-3)))})})}),this.shadowRoot.getElementById("copyBtn").addEventListener("click",()=>{Fe(JSON.stringify(this.executionResult,null,2))}),this.checkRecognizers(),this.checkWebRTCSupport(),this.checkRemoteCameraSupport(),this.checkForSafariCamera(),this.adjustComponent(!0),this.ElementQueries=_e(Me,this.shadowRoot),this.ElementQueries.listen(),window.addEventListener("resize",this.adjustComponent.bind(this,!1)),this.shadowRoot.getElementById("webcamConfirmBtn").addEventListener("click",()=>{Je.SDK.SendImage(this.webcamImage,this.onScanProgress),this.enableResultShow=!0,this.toggleLoader(!0),this.restart(),this.stopCamera(),this.clearConfirmImage()}),this.shadowRoot.getElementById("webcamRetakeBtn").addEventListener("click",()=>{this.clearConfirmImage()}),this.shadowRoot.getElementById("cancelBtnConfirmImage").addEventListener("click",()=>{this.stopCamera(),this.clearConfirmImage()}),document.addEventListener("keydown",e=>{"Escape"===(e=e||window.event).key&&(this.clearTimers(),this.stopCamera())}),document.addEventListener("recognizersUpdated",()=>{this.checkRecognizers()&&qe(this.shadowRoot.querySelector(".error-container"),"show")}),this.shadowRoot.querySelector('slot[name="loader-image"]').addEventListener("slotchange",e=>{let t=e.target.assignedElements();if(0===t.length)return;let r=Array.prototype.map.call(this.shadowRoot.querySelectorAll('slot[name="loader-image"]'),e=>e);r.shift(),r.forEach(e=>{e.innerHTML="",t.forEach(t=>e.appendChild(t.cloneNode(!0)))})})}attributeChangedCallback(e,t,r){"autoscroll"===e&&window[(null!==r?"add":"remove")+"EventListener"]("scroll",this.autoScrollListener)}adjustComponent(e){if(Pe()&&(ze&&ze.isFullscreen?ze.onChangeHandler({target:this}):parseInt(getComputedStyle(this.parentNode).height)<window.innerHeight?this.style.height=getComputedStyle(this.parentNode).height:this.style.height=`${window.innerHeight}px`,e)){this.shadowRoot.getElementById("flipBtn").style.setProperty("display","none","important");let e=this.shadowRoot.getElementById("cameraRemoteBtn");if(e){let t=this.shadowRoot.querySelector("#cameraLocalBtn .circle");t?t.innerHTML=this.shadowRoot.querySelector("#cameraRemoteBtn .circle").innerHTML:this.removeChooseLabel(),e.parentNode.removeChild(e)}Array.prototype.forEach.call(this.shadowRoot.querySelectorAll(".cameraLocalLabel, .browseLabel"),e=>Ue(e,"hidden")),Array.prototype.forEach.call(this.shadowRoot.querySelectorAll("#flipBtn, .video video"),e=>Ue(e,"flipped"))}this.adjustCardPlacer(Pe())}adjustCardPlacer(e){let{offsetWidth:t,offsetHeight:r}=this.shadowRoot.querySelector(".root"),n=t/r>1.585772508336421?t:1.585772508336421*r,o=n/1.585772508336421,i=((1-(e&&window.innerHeight>window.innerWidth?.85:.6))*t+(n-t))/2,a=i/1.585772508336421,s=this.shadowRoot.getElementById("cardPlacer");s.style.width=`${n}px`,s.style.height=`${o}px`,s.style.borderWidth=`${a}px ${i}px`}autoScrollListener(e){if(Pe())if(void 0===this.autoScrollListener.previousPositionY)this.autoScrollListener.previousPositionY=this.getBoundingClientRect().top;else{let e=this.autoScrollListener.previousPositionY,t=this.getBoundingClientRect().top;if(this.autoScrollListener.previousPositionY=t,Math.abs(t)<30&&Math.abs(e)>Math.abs(t)&&!this.autoScrollListener.touchEventInit){this.autoScrollListener.touchEventInit=!0,document.body.style.setProperty("overflow","hidden","important"),window.scrollTo(0,window.pageYOffset+this.getBoundingClientRect().top);let e=setInterval(()=>window.scrollTo(0,window.pageYOffset+this.getBoundingClientRect().top),25);setTimeout(()=>{clearInterval(e),document.body.style.overflow="",this.autoScrollListener.touchEventInit=!1},400)}}}getSlotText(e){return this.querySelector('span[slot="'+e+'"]')?this.querySelector('span[slot="'+e+'"]').textContent:this.shadowRoot.querySelector(`slot[name="${e}"]`).textContent}checkRecognizers(){return!!Je.SDK.IsRecognizerArraySet()||(this.toggleError(!0,this.getSlotText("labels.selectDocumentType"),this.getSlotText("labels.noDocumentType"),!0),!1)}checkWebRTCSupport(){if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia){let e=this.shadowRoot.getElementById("cameraLocalBtn");e.parentNode.removeChild(e)}}checkRemoteCameraSupport(){Je.SDK.IsDesktopToMobileAvailable().then(e=>{if(!e||!He()){let e=this.shadowRoot.getElementById("cameraRemoteBtn");e&&e.style.setProperty("display","none","important"),this.shadowRoot.getElementById("cameraLocalBtn")||this.removeChooseLabel()}})}removeChooseLabel(){Array.prototype.map.call(this.shadowRoot.querySelectorAll(".container.intro .intro-label"),e=>e).forEach(e=>e.parentNode.removeChild(e))}getLocalization(){let e=this.getElementsByClassName("localization")[0];return e?new Promise(t=>{if(/\sjson\s/.test(` ${e.className} `))try{this.handleJson(JSON.parse(e.content.textContent.trim().replace(/\\n/g,"<br/>"))),t(!0)}catch(e){t(!1)}else{let r=e.content.textContent,n=new XMLHttpRequest;n.onreadystatechange=(()=>{if(4===n.readyState&&200===n.status)try{this.handleJson(JSON.parse(n.responseText.trim().replace(/\\n/g,"<br/>"))),t(!0)}catch(e){t(!1)}else 4===n.readyState&&t(!1)}),n.open("GET",r&&r.trim(),!0),n.send()}}):Promise.resolve(!0)}handleJson(e){let t="";if(function e(r,n){Object.keys(r).forEach(o=>{r[o]instanceof Object?e(r[o],n?n+"."+o:o):t+=`<span class="translate-label" slot="${n?n+"."+o:o}">${r[o]}</span>`})}(e,""),t){let e=document.createElement("template");e.innerHTML=t,this.appendChild(e.content.cloneNode(!0))}}setLocalization(e){if(!e||!["string","object"].includes(typeof e))return!1;if("string"==typeof e)try{e=JSON.parse(e)}catch(e){return!1}return Array.prototype.forEach.call(this.querySelectorAll(".translate-label"),e=>e.parentNode.removeChild(e)),this.handleJson(e),!0}injectStyleSheet(e){if(e){let t=document.createElement("link");t.rel="stylesheet",t.type="text/css",t.href=e,this.shadowRoot.insertBefore(t,this.shadowRoot.childNodes[1])}}toggleLoader(e){let t=this.shadowRoot.querySelector(".pending-container");e&&(this.shadowRoot.querySelector(".progress-bar-value").textContent="0%",Array.prototype.forEach.call(this.shadowRoot.querySelectorAll(".pending-container h2"),e=>Ue(e,"hidden",!e.matches(":first-of-type"))),this.toggleTabs(!1)),Ue(t,"show",e)}toggleError(e,t,r,n){let o=this.shadowRoot.querySelector(".error-container");if(o.innerHTML="",r){let e=document.createElement("div");e.textContent=r,Ye(e,"title"),o.appendChild(e)}let i=document.createElement("div");if(Ye(i,"message"),i.textContent=t||this.getSlotText("labels.errorMsg"),o.appendChild(i),!n){let e=document.createElement("button");e.textContent=this.getSlotText("buttons.tryAgain"),e.addEventListener("click",()=>{this.restart(),this.stopCamera(),this.toggleError()}),o.appendChild(e)}Ue(o,"show",e)}toggleTabs(e){Ue(this.shadowRoot.querySelector(".container.root"),"tabs",e);let t=this.shadowRoot.querySelectorAll(".main > .container");!1===e?(Array.prototype.forEach.call(this.shadowRoot.querySelectorAll(".tab"),e=>Ue(e,"active","resultsTab"===e.id)),Array.prototype.forEach.call(t,e=>Ue(e,"active",Ne(e,"intro")))):!0===e&&Array.prototype.forEach.call(t,e=>Ue(e,"active",Ne(e,"results")))}onDrop(e){let t;if(e.preventDefault(),this.onDragLeave(),t=e.dataTransfer.items&&e.dataTransfer.items[0]?e.dataTransfer.items[0].getAsFile():e.dataTransfer.files&&e.dataTransfer.files[0]){let e=this.shadowRoot.getElementById("file").getAttribute("accept").split(",");if(t.type&&e.find(e=>e===t.type))this.setFile(t);else{let e=this.getSlotText("labels.unsupportedFileType");this.toggleError(!0,e),this.dispatchEvent("error",new Error(e))}}}onDragEnter(){Ye(this.shadowRoot.querySelector(".dropzone"),"draghover")}onDragLeave(){qe(this.shadowRoot.querySelector(".dropzone"),"draghover")}fileChosen(e){let t=e.target.files&&e.target.files[0];t&&this.setFile(t)}setFile(e){if(e.size>15728640){let e=this.getSlotText("labels.fileSizeLimitExceeded");return this.toggleError(!0,e),void this.dispatchEvent("error",new Error(e))}this.toggleLoader(!0),this.restart(),Je.SDK.SendImage({blob:e},this.onScanProgress),this.enableResultShow=!0}async activateRemoteCamera(){this.unsubscribeFromScanExchangerChanges&&this.unsubscribeFromScanExchangerChanges();const e=this.shadowRoot,t=()=>this.enableResultShow=!0;e.getElementById("generating-exchange-link").style.setProperty("display","block"),e.getElementById("exchange-link-title").style.setProperty("display","none","important"),e.getElementById("exchange-link-notes").style.setProperty("display","none","important"),e.getElementById("exchange-link-remote-camera-is-pending").style.setProperty("display","none","important"),e.getElementById("exchange-link-remote-camera-is-open").style.setProperty("display","none","important"),e.getElementById("exchange-link-image-is-uploading").style.setProperty("display","none","important"),e.getElementById("exchange-link-image-is-processing").style.setProperty("display","none","important"),e.querySelector(".remote-camera .loader-img").style.setProperty("display","block"),e.getElementById("exchange-link").innerHTML="",e.getElementById("exchange-link-as-QR").innerHTML="";try{this.unsubscribeFromScanExchangerChanges=await Je.SDK.CreateScanExchanger({},r=>{if(this.toggleTabs(!1),this.clearTabs(),Array.prototype.forEach.call(this.shadowRoot.querySelectorAll(".root > .container, .permission, .confirm-image"),e=>Ue(Ue(e,"hidden",!Ne(e,"remote-camera")),"show",Ne(e,"remote-camera"))),r.status===Je.SDK.ScanExchangerCodes.Step02_ExchangeLinkIsGenerated&&r.shortLink){const t=r.shortLink;e.getElementById("exchange-link").innerHTML=`<a href="${t}" target="_blank" >${t}</a>`,e.querySelector(".remote-camera .loader-img").style.setProperty("display","none","important"),e.getElementById("exchange-link-title").style.setProperty("display","block"),e.getElementById("exchange-link-notes").style.setProperty("display","block"),e.getElementById("generating-exchange-link").style.setProperty("display","none","important"),r.qrCodeAsBase64&&(e.getElementById("exchange-link-as-QR").innerHTML='<img src="'+r.qrCodeAsBase64+'" />')}else e.getElementById("exchange-link-as-QR").innerHTML="";r.status===Je.SDK.ScanExchangerCodes.Step03_RemoteCameraIsPending?(e.getElementById("exchange-link").innerHTML="",e.getElementById("exchange-link-title").style.setProperty("display","none","important"),e.getElementById("exchange-link-notes").style.setProperty("display","none","important"),e.getElementById("exchange-link-remote-camera-is-pending").style.setProperty("display","block")):e.getElementById("exchange-link-remote-camera-is-pending").style.setProperty("display","none","important"),r.status===Je.SDK.ScanExchangerCodes.Step04_RemoteCameraIsOpen?e.getElementById("exchange-link-remote-camera-is-open").style.setProperty("display","block"):e.getElementById("exchange-link-remote-camera-is-open").style.setProperty("display","none","important"),r.status===Je.SDK.ScanExchangerCodes.Step05_ImageIsUploading?(e.getElementById("exchange-link-image-is-uploading").style.setProperty("display","block"),e.querySelector(".remote-camera .loader-img").style.setProperty("display","block")):e.getElementById("exchange-link-image-is-uploading").style.setProperty("display","none","important"),r.status===Je.SDK.ScanExchangerCodes.Step06_ImageIsProcessing?(e.getElementById("exchange-link-image-is-processing").style.setProperty("display","block"),e.querySelector(".remote-camera .loader-img").style.setProperty("display","block")):e.getElementById("exchange-link-image-is-processing").style.setProperty("display","none","important"),r.status===Je.SDK.ScanExchangerCodes.Step07_ResultIsAvailable&&r.result&&(e.querySelector(".remote-camera .loader-img").style.setProperty("display","none","important"),t())})}catch(e){console.error("Microblink.SDK.CreateScanExchanger.error",e)}}openFullscreen(){let e=this.shadowRoot.querySelector(".root");return!(this.fullscreen&&ze&&ze.isEnabled)||Pe()&&Ge()?Promise.resolve(!1):ze.request(e)}closeFullscreen(){return!(this.fullscreen&&ze&&ze.isEnabled)||Pe()&&Ge()?Promise.resolve(!1):ze.exit()}async activateLocalCamera(){let e=this.shadowRoot.getElementById("video");await Ve(e).then(t=>{this.shadowRoot.getElementById("cameraLocalBtn").setAttribute("disabled",""),t.controls=!0,e.load(),setTimeout(()=>{e.play().catch(()=>{Ye(this.shadowRoot.getElementById("photoBtn"),"hidden"),Ye(this.shadowRoot.getElementById("cardPlacer"),"hidden")})},0),this.toggleTabs(!1),this.clearTabs(),Array.prototype.forEach.call(this.shadowRoot.querySelectorAll(".root > .container, .permission, .confirm-image"),e=>Ue(Ue(e,"hidden",!Ne(e,"video")),"show",Ne(e,"video")))}).catch(e=>{let t;switch(this.closeFullscreen(),this.onCameraPermissionResolve(!1),e.reason){case"CameraNotFound":t=this.getSlotText("labels.notFoundErrorMsg");break;case"CameraNotAllowed":t=this.getSlotText("labels.notAllowedErrorMsg");break;case"CameraNotAvailable":t=this.getSlotText("labels.cameraNotAvailableErrorMsg");break;case"CameraInUse":t=this.getSlotText("labels.cameraInUseErrorMsg");break;case"MediaDevicesNotSupported":t=this.getSlotText("labels.webRtcUnsupported")}this.toggleError(!0,t),this.dispatchEvent("error",new Error("Camera error: "+e.reason)),console.log(e.name+": "+e.message)}).finally(()=>this.shadowRoot.getElementById("cameraLocalBtn").removeAttribute("disabled"))}flipCamera(){Array.prototype.forEach.call(this.shadowRoot.querySelectorAll(".video video, #flipBtn"),e=>Ue(e,"flipped"))}stopCamera(){let e=this.shadowRoot.getElementById("video");e.pause(),e.srcObject?(e.srcObject.getTracks()[0].stop(),e.srcObject=null):e.src&&(e.captureStream||e.mozCaptureStream)&&((e.captureStream||e.mozCaptureStream)().getTracks()[0].stop(),URL.revokeObjectURL(e.src),e.src=null),Array.prototype.forEach.call(this.shadowRoot.querySelectorAll(".root > .container, .permission, .confirm-image"),e=>Ue(Ue(e,"hidden",!Ne(e,"main")),"show",Ne(e,"main"))),this.closeFullscreen(),this.checkForSafariCamera()}checkForSafariCamera(){je()&&navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices&&navigator.mediaDevices.enumerateDevices().then(e=>{this.cameraPermitted=!!(e||[]).filter(({kind:e,label:t})=>"videoinput"===e&&!!t).length})}startRecording(){this.enableResultShow=!1,this.frame=null,this.canvas=null;let e=3;Ye(this.shadowRoot.getElementById("photoBtn"),"hidden"),Ye(this.shadowRoot.getElementById("counter"),"show");let t=this.shadowRoot.getElementById("counter-number");t.textContent=String(e),this.counterIntervalId=setInterval(()=>{t.textContent=String(--e),1===e&&(this.frameSendingIntervalId=setInterval(async()=>{0===e?(qe(this.shadowRoot.getElementById("counter"),"show"),clearInterval(this.frameSendingIntervalId),this.frame=await this.getNextBestFrame(),this.showConfirmDialog(this.frame)):this.frame=await this.getNextBestFrame()},200)),0===e&&clearInterval(this.counterIntervalId)},1e3)}getNextBestFrame(){return new Promise(e=>{this.captureFrame().then(({blob:t,pixelData:r})=>{let n=z.getFrameQuality(r);e(!this.frame||n>this.frame.quality?{blob:t,quality:n}:this.frame)})})}captureFrame(){let e=this.shadowRoot.getElementById("video"),t=this.canvas=this.canvas||document.createElement("canvas");t.width=e.videoWidth,t.height=e.videoHeight,t.getContext("2d").drawImage(e,0,0,t.width,t.height);let r=t.getContext("2d").getImageData(0,0,t.width,t.height);return new Promise(e=>{if(t.toBlob)t.toBlob(t=>e({blob:t,pixelData:r}),"image/jpeg",.95);else{let n=atob(t.toDataURL("image/jpeg",.95).split(",")[1]),o=n.length,i=new Uint8Array(o);Array.prototype.forEach.call(i,(e,t)=>i[t]=n.charCodeAt(t));let a=new Blob([i],{type:"image/jpeg"});e({blob:a,pixelData:r})}})}showConfirmDialog({blob:e}){this.webcamImage={blob:e};let t=new Image;t.src=URL.createObjectURL(e);let r=this.shadowRoot.querySelector(".confirm-image .image-container");r.innerHTML="",r.appendChild(t),Ye(this.shadowRoot.querySelector(".confirm-image"),"show"),this.restartCounter()}clearConfirmImage(){qe(this.shadowRoot.querySelector(".confirm-image"),"show");let e=this.shadowRoot.querySelector(".confirm-image .image-container"),t=e.querySelector("img");t&&URL.revokeObjectURL(t.src),e.innerHTML=""}restart(){this.toggleTabs(!1),this.clearTabs(),Array.prototype.forEach.call(this.shadowRoot.querySelectorAll(".root > .container, .permission, .confirm-image"),e=>Ue(Ue(e,"hidden",!Ne(e,"main")),"show",Ne(e,"main")))}restartCounter(){qe(this.shadowRoot.getElementById("photoBtn"),"hidden"),qe(this.shadowRoot.getElementById("counter"),"show")}fillTabs(e){this.fillResultTable(e.result),this.fillJson(e.result),this.toggleTabs(!0)}fillResultTable(e){if(!e||!e.data)return;qe(this.shadowRoot.querySelector(".error-container"),"show");let t=e.data instanceof Array?e.data:[e.data],r="",n=-1!==e.summary.search(/Authorization header is missing/gi);t.forEach(({recognizer:e,result:t})=>{if(!t)return;let o,i="";void 0!==t.faceImageBase64&&(i=n?'<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAQAAADa613fAAAAa0lEQVR42u3PMREAAAgEIL9/WwtoBHcPGpCeeiEiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIpcFKjbCiZfrjTwAAAAASUVORK5CYII="/>':`<img src="data:image/${Qe(t.faceImageBase64)};base64,${t.faceImageBase64}"/>`),o=void 0!==t.lastName&&void 0!==t.firstName?t.lastName+" "+t.firstName:void 0!==t.primaryID&&void 0!==t.secondaryID?t.primaryID+" "+t.secondaryID:"",r+=`<div class="resultTable">\n              <div class="row heading">\n                <div class="faceImage">${i}</div>\n                <div class="headingText">\n                  <div class="fullName">${o}</div>\n                  <div class="recognizerType">${e}</div>\n                </div>\n              </div>`,Object.keys(t).forEach(e=>{e.includes("Base64")||(r+=`<div class="row"><div class="label">${function(e){return e.replace(/([A-Z]+)/g," $1").replace(/^\w/,e=>e.toUpperCase())}(e)}</div>\n                    <div class="content">${t[e]instanceof Object?function(e){let{day:t,month:r,year:n}=e;if(null===t&&null===r&&null===n)return null;if("number"!=typeof t||"number"!=typeof r||"number"!=typeof n)return e;let o=new Date(n,r-1,t);0===t&&(o=new Date(n,r,t));let i=navigator.userLanguage||navigator.language||navigator.languages&&navigator.languages[0];return o.toLocaleDateString(i||void 0)}(t[e]):Oe(t[e])}</div>\n                  </div>`)}),void 0!==t.signatureImageBase64&&(r+=n?'<div class="row"><div class="label">Signature</div><div class="content signature"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPAAAAA8CAQAAADydv/WAAAAbElEQVR42u3RAQEAAAQDMO/fVgF6sFVYeorDIlgwghGMYAQjGMGCEYxgBCMYwQgWjGAEIxjBCEYwggUjGMEIRjCCESwYwQhGMIIRjGDBCEYwghGMYAQjWDCCEYxgBCMYwYIRjGAEIxjBCP5uAQrmdLkka2HAAAAAAElFTkSuQmCC"></div></div>':`<div class="row"><div class="label">Signature</div>\n                <div class="content signature"><img src="data:image/${Qe(t.signatureImageBase64)};base64,${t.signatureImageBase64}"/></div>\n              </div>`),void 0!==t.fullDocumentImageBase64&&(r+=n?'<div class="row"><div class="label"></div><div class="content fullDocument"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAjAAAAFUCAQAAACQdc41AAADO0lEQVR42u3UMQEAAAjDMObfLQZABReJhB5NTwGciMEABgMYDIDBAAYDGAyAwQAGAxgMgMEABgMYDIDBAAYDGAyAwQAGAxgMgMEABgMYDIDBAAYDGAyAwQAGAxgMgMEABgNgMIDBAAYDYDCAwQAGA2AwgMEABgNgMIDBAAYDYDCAwQAGA2AwgMEABgNgMIDBAAYDYDCAwQAGA2AwgMEABgNgMIDBABgMYDCAwQAYDGAwgMEAGAxgMIDBABgMYDCAwQAYDGAwgMEAGAxgMIDBABgMYDCAwQAYDGAwgMEAGAxgMIDBABgMYDAABgMYDGAwAAYDGAxgMAAGAxgMYDAABgMYDGAwAAYDGAxgMAAGAxgMYDAABgMYDGAwAAYDGAxgMAAGAxgMYDAABgMYDIDBAAYDGAyAwQAGAxgMgMEABgMYDIDBAAYDGAyAwQAGAxgMgMEABgMYDIDBAAYDGAyAwQAGAxgMgMEABgMYDIDBAAYDYDCAwQAGA2AwgMEABgNgMIDBAAYDYDCAwQAGA2AwgMEABgNgMIDBAAYDYDCAwQAGA2AwgMEABgNgMIDBAAYDYDCAwQAYDGAwgMEAGAxgMIDBABgMYDCAwQAYDGAwgMEAGAxgMIDBABgMYDCAwQAYDGAwgMEAGAxgMIDBABgMYDCAwYgAGAxgMAAGAxgMYDAABgMYDGAwAAYDGAxgMAAGAxgMYDAABgMYDGAwAAYDGAxgMAAGAxgMYDAABgMYDGAwAAYDGAxgMAYDGAxgMAAGAxgMYDAABgMYDGAwAAYDGAxgMAAGAxgMYDAABgMYDGAwAAYDGAxgMAAGAxgMYDAABgMYDGAwAAYDGAxgMAYDGAxgMAAGAxgMYDAABgMYDGAwAAYDGAxgMAAGAxgMYDAABgMYDGAwAAYDGAxgMAAGAxgMYDAABgMYDGAwAAYDGAyAwQAGAxgMgMEABgMYDIDBAAYDGAyAwQAGAxgMgMEABgMYDIDBAAYDGAyAwQAGAxgMgMEABgMYDIDBAAYDGAyAwQAGA2AwgMEABgNgMIDBAAYDYDCAwQAGA2AwgMEABgNgMIDBAAYDYDCAwQAGA2AwgMEABgNgMIDBAP8sMiWVh63j1TAAAAAASUVORK5CYII="/></div></div>':`<div class="row"><div class="label"></div>\n                    <div class="content fullDocument"><img src="data:image/${Qe(t.fullDocumentImageBase64)};base64,${t.fullDocumentImageBase64}"/></div>\n                  </div>`),r+="</div>"}),r?this.shadowRoot.querySelector(".container.results").innerHTML=r:this.toggleError(!0,this.getSlotText("labels.scanningFinishedNoDataMessage"),this.getSlotText("labels.scanningFinishedNoDataTitle"),!1)}fillJson(e){if(!e||"{}"===JSON.stringify(e)||"[]"===JSON.stringify(e))return;let t="";!function e(r,n,o){let i=Array(o+1).join("     ");if(null!==r){if(void 0===n)return;t+=`\n${i}<span class="key">"${Oe(r)}"</span>: `}else i.length&&(t+=`\n${i}`);switch(typeof n){case"undefined":case"function":case"symbol":break;case"string":r&&r.includes("Base64")&&(n=n.substring(0,50)+"..."),t+=`<span class="string">"${Oe(n)}"</span>,`;break;case"number":t+=`<span class="number">${n}</span>,`;break;case"boolean":t+=`<span class="boolean">${n}</span>,`;break;default:null===n?t+=`<span class="null">${n}</span>,`:n instanceof Array?(t+="[",n.forEach(t=>e(null,t,o+1)),n.length&&(t=t.slice(0,-1)),t+=`\n${i}],`):(t+="{",Object.keys(n).forEach(t=>e(t,n[t],o+1)),Object.keys(n).length&&(t=t.slice(0,-1)),t+=`\n${i}},`)}}(null,e,0),t=t.slice(0,-1),this.shadowRoot.querySelector(".main > .json > div").innerHTML=t}clearTabs(){let e=this.shadowRoot.querySelector(".image image");e&&URL.revokeObjectURL(e.src),Array.prototype.forEach.call(this.shadowRoot.querySelectorAll(".main > :not(.intro):not(.json)"),e=>e.innerHTML=""),this.shadowRoot.querySelector(".main > .json > div").innerHTML=""}onScanSuccess(e){if(!e)return;this.executionResult=e.result,this.clearTimers();let t=setInterval(()=>{this.enableResultShow&&(clearInterval(t),this.toggleLoader(!1),this.stopCamera(),this.restartCounter(),this.tabs&&this.fillTabs(e),this.dispatchEvent("resultReady",e))},200)}onScanError(e){this.unsubscribeFromScanExchangerChanges&&this.unsubscribeFromScanExchangerChanges(),this.clearTimers(),this.toggleLoader(!1),this.stopCamera(),this.restartCounter(),this.toggleError(!0,e&&e.message),this.dispatchEvent("error",new Error(e&&e.message||this.getSlotText("labels.errorMsg")))}clearTimers(){clearInterval(this.frameSendingIntervalId),clearInterval(this.counterIntervalId),clearTimeout(this.messageTimeoutId),qe(this.shadowRoot.getElementById("counter"),"show")}dispatchEvent(e,t){let r;switch(t=t||{},e){case"resultReady":"function"==typeof CustomEvent?r=new CustomEvent("resultReady",{detail:{result:t.result},cancelable:!0,bubbles:!0}):(r=document.createEvent("CustomEvent")).initCustomEvent("resultReady",!0,!0,{result:t.result});break;case"error":"function"==typeof ErrorEvent?r=new ErrorEvent("error",{cancelable:!0,bubbles:!0,message:t.message,error:t}):(r=document.createEvent("ErrorEvent")).initErrorEvent("error",!0,!0,t.message,null,null);break;default:return}super.dispatchEvent(r)}onScanProgress(e){let{loaded:t,total:r,lengthComputable:n}=e,o=this.shadowRoot.querySelector(".progress-bar-value"),i=Ne(o,"hidden");n?(i&&qe(o,"hidden"),o.textContent=`${Math.round(t/r*100)}%`,t===r&&setTimeout(()=>this.changeLoaderMessage(),200)):i||Ye(o,"hidden")}changeLoaderMessage(e=0){let t=this.shadowRoot.querySelectorAll(".pending-container h2");t.length<=1||(Array.prototype.forEach.call(t,r=>Ue(r,"hidden",!r.matches(`:nth-of-type(${e%(t.length-1)+2})`))),this.messageTimeoutId=setTimeout(()=>this.changeLoaderMessage(++e),1e3+Math.round(3e3*Math.random())))}onCameraPermissionDialog(){Ye(this.shadowRoot.querySelector(".permission"),"show")}onCameraPermissionResolve(e){null!==this.permissionTimeoutId?clearTimeout(this.permissionTimeoutId):qe(this.shadowRoot.querySelector(".permission"),"show"),this.streamStatus=e}})}Xe.src="//unpkg.com/@webcomponents/webcomponentsjs/webcomponents-loader.js",Xe.addEventListener("load",()=>{window.WebComponents.waitFor(()=>{if(window.customElements)Ze();else{let e=ddocument.createElement("script");e.src="//unpkg.com/@webcomponents/webcomponentsjs/bundles/webcomponents-sd-ce-pf.js",e.addEventListener("load",()=>{window.WebComponents.waitFor(Ze)}),document.head.insertBefore(e,document.head.querySelector('script[src*="microblink."]'))}})}),document.head.insertBefore(Xe,document.head.querySelector('script[src*="microblink."]')),ze&&ze.isEnabled&&function(e){e.request=(t=>new Promise((r,n)=>{let o=()=>{e.off("change",o),r()};e.on("change",o),t=t||document.documentElement,Promise.resolve(t[e.raw.requestFullscreen]({navigationUI:"hide"})).catch(n)}));let t=({target:t})=>{let r=t.shadowRoot.querySelector(".root");setTimeout(()=>{e.isFullscreen&&Pe()&&Ge()&&(window.outerHeight>window.outerWidth?(r.clientHeight,screen.availHeight):(r.clientWidth,screen.availWidth))},200)};e.on("change",t),e.onChangeHandler=t}(ze)}();
